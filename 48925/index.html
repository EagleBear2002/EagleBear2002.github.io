<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 8.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.jpg">
  <link rel="mask-icon" href="/images/avatar.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-big-counter.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"eaglebear2002.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":400,"display":"always","padding":18,"offset":12,"onmobile":true,"scroll_to_top_on_sidebar_toggle":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="本文主要内容来自 SpriCoder的博客，更换了更清晰的图片并对原文的疏漏做了补充和修正。 本文提供了 pdf 版，以供打印：商务智能-05-多维建模.pdf。 维度建模中的基本概念  事实表 维度表 事实与维度的融合  星型模型 雪花模型 数据立方体    事实表">
<meta property="og:type" content="article">
<meta property="og:title" content="商务智能-05-多维建模">
<meta property="og:url" content="https://eaglebear2002.github.io/48925/index.html">
<meta property="og:site_name" content="EagleBear2002 的博客">
<meta property="og:description" content="本文主要内容来自 SpriCoder的博客，更换了更清晰的图片并对原文的疏漏做了补充和修正。 本文提供了 pdf 版，以供打印：商务智能-05-多维建模.pdf。 维度建模中的基本概念  事实表 维度表 事实与维度的融合  星型模型 雪花模型 数据立方体    事实表">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/69.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131151353784.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131151456080.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/4.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131151657981.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131151711117.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131151741270.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131151810450.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131151822622.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131151831943.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131151910948.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131151927016.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131151951359.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131151959598.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131152031360.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131152219272.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131152234023.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131152308944.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131152611966.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131152651205.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131152941386.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131153001335.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131153038079.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131153145924.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131153555130.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131155024946.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131155118593.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131155333494.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131155500362.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131155552130.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131155606856.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131155737982.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131160030346.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131160100423.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131173645562.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131174515431.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131174657276.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131174929188.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131174952807.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131175333976.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131175347214.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131175404614.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131175422372.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131175438340.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131212747510.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131212904629.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131212918418.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131213030512.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131213130286.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131214235147.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131214241659.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131214312295.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131214317478.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131214451561.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131214518680.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131214547627.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131214600275.png">
<meta property="og:image" content="https://eaglebear2002.github.io/48925/image-20230131214647986.png">
<meta property="article:published_time" content="2023-01-31T06:33:00.000Z">
<meta property="article:modified_time" content="2026-02-09T05:08:29.530Z">
<meta property="article:author" content="EagleBear2002">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://eaglebear2002.github.io/48925/69.png">

<link rel="canonical" href="https://eaglebear2002.github.io/48925/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>商务智能-05-多维建模 | EagleBear2002 的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<script>
  hljs.initLineNumbersOnLoad();
</script>
<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">EagleBear2002 的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">这里必须根绝一切犹豫，这里任何怯懦都无济于事</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">61</span></a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">3</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">483</span></a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/eaglebear2002" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://eaglebear2002.github.io/48925/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="EagleBear2002">
      <meta itemprop="description" content="暮雪朝霜，毋改英雄意气">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EagleBear2002 的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          商务智能-05-多维建模
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-31 14:33:00" itemprop="dateCreated datePublished" datetime="2023-01-31T14:33:00+08:00">2023-01-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2026-02-09 13:08:29" itemprop="dateModified" datetime="2026-02-09T13:08:29+08:00">2026-02-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%AD%A6%E9%99%A2%E6%9C%AC%E7%A7%91%E8%AF%BE%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">南京大学软件学院本科课程</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%AD%A6%E9%99%A2%E6%9C%AC%E7%A7%91%E8%AF%BE%E7%A8%8B/2022Fall-%E5%95%86%E5%8A%A1%E6%99%BA%E8%83%BD/" itemprop="url" rel="index"><span itemprop="name">2022Fall-商务智能</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>17k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>15 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>本文主要内容来自 <a target="_blank" rel="noopener" href="https://spricoder.github.io/">SpriCoder的博客</a>，更换了更清晰的图片并对原文的疏漏做了补充和修正。</p>
<p>本文提供了 pdf 版，以供打印：<a href="https://eaglebear2002.github.io/48925/%E5%95%86%E5%8A%A1%E6%99%BA%E8%83%BD-05-%E5%A4%9A%E7%BB%B4%E5%BB%BA%E6%A8%A1.pdf">商务智能-05-多维建模.pdf</a>。</p>
<h2 id="维度建模中的基本概念">维度建模中的基本概念</h2>
<ol>
<li>事实表</li>
<li>维度表</li>
<li>事实与维度的融合
<ol>
<li>星型模型</li>
<li>雪花模型</li>
<li>数据立方体</li>
</ol>
</li>
</ol>
<h3 id="事实表">事实表</h3>
<p>事实表是维度建模的核心和基本表。</p>
<p>每一事实表都对应着一个或若干个“度量值”：</p>
<ol>
<li>度量值是事实表的核心，也是趋势分析的对象</li>
<li>通过事实表来记录维度值与度量值之间的关系</li>
</ol>
<p>事实表中的一行对应一个度量值：</p>
<ol>
<li>事实表中的所有度量值必须具有相同的粒度</li>
<li>粒度划分模型（粒度由小到大）：事务，周期快照，累积快照</li>
</ol>
<h4 id="事务">事务</h4>
<ol>
<li>记录的事务层面的事实，保存的是最原子的数据，又称“原子事实表”，事务事实表中的数据在事务时间发生后产生。</li>
<li>粒度是一条记录，比如银行转账 1 块钱。</li>
<li>更新方式是增量更新，具有稀疏性质，因为很多的事实可能不同时发生，是稀疏表，只有当天发生了操作才有记录。</li>
</ol>
<h4 id="周期快照">周期快照</h4>
<ol>
<li>以具有规律性的、可预见的时间间隔来记录事实，统计的是间隔周期内的度量统计。时间间隔：年、月、日等。</li>
<li>周期快照没有粒度的概念，是周期+状态度量的组合，其粒度是每个时间段一条记录。</li>
<li>周期快照事实表维度少于事务事实表，但是记录的事实要多于事实事务表。</li>
<li>更新方式是增量更新，是稠密表，哪怕当天没操作也会有记录</li>
<li>用于记录重复的可预测时间间隔的事实，比如每月账单。</li>
</ol>
<h4 id="累积快照">累积快照</h4>
<ol>
<li>累积快照事实表存储的是不确定的周期的数据，他完全覆盖了一个事务或一个产品的生命周期的时间跨度，通常有多个日期字段来记录关键时间点，比如订单的付款时间、发货时间、收货时间等。</li>
<li>累积快照事实表只会有一条记录，数据会一直更新到过程结束。</li>
<li>通常包含很多日期字段，并且会有一个用户只是最后更新日期的附加日期字段。</li>
<li>用于记录较短周期，有着明确开始和结束状态等多个状态的过程。</li>
</ol>
<p>更多阅读：<a target="_blank" rel="noopener" href="https://blog.csdn.net/a6822342/article/details/99189806?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control">事实表的分类：事务事实表，周期快照事实表，累积快照事实表</a></p>
<img src="/48925/69.png" style="zoom: 50%;">
<h4 id="事实表中的度量值">事实表中的度量值</h4>
<p>最常用的度量值：数值类型，方便处理</p>
<p>度量值通常是一个可以连续取值的量，很少采用文本形式的度量值，因为文本没有办法处理。</p>
<p>三种类型的度量值：</p>
<ol>
<li>可做加法运算</li>
<li>可沿着某些维度做加法运算：比如每天剩下的零钱按照时间加。</li>
<li>不能做加法运算
<ol>
<li>计数统计</li>
<li>计算平均值</li>
<li>取样统计</li>
</ol>
</li>
</ol>
<p>无法量化不是量化本身的问题，而是体系的问题。</p>
<h4 id="事实表中的关键字">事实表中的关键字</h4>
<p>每个事实表都有两个或两个以上的外关键字（Foreign Key）</p>
<ol>
<li>通过外关键字建立事实表与维表之间的联系，从而可以通过维度表来存取事实表中的度量值</li>
<li>可以由外关键字的组合构成事实表的主关键字（Primary Key）</li>
</ol>
<table>
<thead>
<tr>
<th>日销售情况事实表</th>
</tr>
</thead>
<tbody>
<tr>
<td>日期关键字（FK）<br>产品关键字（FK）<br>商场关键字（FK）<br>销售量<br>销售额</td>
</tr>
</tbody>
</table>
<ol start="3">
<li>销售量和销售额是度量值，可以体现出其关联关系。</li>
<li>多少个维度就有多少个外关键字。</li>
<li>事实表中单独的 Primary Key 是没有意义的，但有时候为了解决问题我们可能会引入新的关键字。</li>
</ol>
<h3 id="维度表">维度表</h3>
<ol>
<li>维度表是事实表的入口，为用户提供了使用数据仓库的接口。</li>
<li>维度表中的维度属性通常用于定义事实表上的查询条件，也可作为定义报表和统计查询的“列”。</li>
<li>维度表的定义通常包括：
<ol>
<li>尽可能多的列：和事实表的差别</li>
<li>相对少的行（相对于事实表）</li>
</ol>
</li>
</ol>
<h4 id="维度表的属性组成">维度表的属性组成</h4>
<p>操作型数据环境中不会有这么多数据：只有部分数据是有意义的。</p>
<img src="/48925/image-20230131151353784.png" style="zoom:33%;">
<h4 id="维度属性">维度属性</h4>
<p>通常是文本数据，或者是离散数据</p>
<p>尽量减少使用编码属性：对于人而言不好理解</p>
<p>维度属性与度量值（属性）的区别：</p>
<ol>
<li>度量值属性：有许多取值可能并可以参与统计运算的属性</li>
<li>维度属性：
<ol>
<li>离散的或取值可能不多的属性</li>
<li>取值不变或很少产生变化的属性</li>
<li>从不参与统计计算但经常用作查询条件的属性</li>
</ol>
</li>
</ol>
<h3 id="事实与维度的融合">事实与维度的融合</h3>
<p>将事实表及其相关的维表通过关键字进行连接</p>
<img src="/48925/image-20230131151456080.png" style="zoom:33%;">
<h3 id="维度建模案例">维度建模案例</h3>
<ol>
<li>维度建模案例之一：零售营销</li>
<li>维度建模案例之二：库存管理</li>
<li>维度建模案例之三：订单管理</li>
<li>维度建模案例之四：客户关系管理</li>
</ol>
<p>注：上述案例及其图、表均引自：“数据仓库生命周期工具箱：设计、开发和部署数据仓库的专家方法”一书</p>
<h2 id="维度建模案例之一：零售营销">维度建模案例之一：零售营销</h2>
<h3 id="维度建模的设计过程">维度建模的设计过程</h3>
<ol>
<li>选取要建模的业务处理过程（分析型）：根据分析需要</li>
<li>定义业务处理的粒度：确定事实表中每一行的度量值的取值粒度，和多维度相关。</li>
<li>选择事实表中的维度（事先已经建立）：设计中一定是先设计好维度</li>
<li>选择事实表中的度量值
<ol>
<li>以分析对象为依据</li>
<li>可以有多个度量值</li>
</ol>
</li>
</ol>
<h3 id="零售营销的需求分析">零售营销的需求分析</h3>
<ol>
<li>数据的入口（数据驱动）：前台 POS 机和后台的货物入库</li>
<li>管理决策需要（面向主题）：定价和促销</li>
</ol>
<h3 id="维度建模的设计过程-2">维度建模的设计过程</h3>
<p>选取业务处理：在什么促销条件下，在什么样的日子里，在什么商店，正在销售什么样的商品</p>
<p>定义粒度：</p>
<ol>
<li>POS 事务的单个商品条目结构</li>
<li>最初粒度的选择与可以执行的分析操作有关</li>
</ol>
<img src="/48925/4.png" style="zoom:33%;">
<h4 id="选定维度">选定维度</h4>
<img src="/48925/image-20230131151657981.png" style="zoom:33%;">
<h4 id="确定事实">确定事实</h4>
<img src="/48925/image-20230131151711117.png" style="zoom:33%;">
<p>通过计算而获得的可加性度量值也可以物理存储在事实表中，如：毛利润金额（毛利润金额 = 销售额 - 成本额）</p>
<p>不具有可加性的计算结果则应该由分析展现工具在访问过程中进行计算，如：毛利润率，单价等</p>
<p>在不同环境下，成本可能是分散的。</p>
<p>原生性：要什么有什么，导出性数据考虑一下对时间和性能的改善。</p>
<img src="/48925/image-20230131151741270.png" style="zoom:50%;">
<h4 id="维度设计-日期维度">维度设计-日期维度</h4>
<ol>
<li>日期维度是每个数据仓库必须具备的维度</li>
<li>日期维度表可以事先建立：可以预先建立好 5 到 10 年的日期维度值</li>
</ol>
<h5 id="日期维度中的属性">日期维度中的属性</h5>
<img src="/48925/image-20230131151810450.png" style="zoom:33%;">
<img src="/48925/image-20230131151822622.png" style="zoom:33%;">
<h5 id="日期维度表">日期维度表</h5>
<img src="/48925/image-20230131151831943.png" style="zoom: 50%;">
<h4 id="维度设计-产品维度">维度设计-产品维度</h4>
<img src="/48925/image-20230131151910948.png" style="zoom: 33%;">
<h5 id="产品维度表（部分）">产品维度表（部分）</h5>
<img src="/48925/image-20230131151927016.png" style="zoom: 50%;">
<h5 id="产品维度的属性">产品维度的属性</h5>
<p>在产品维度表中存在着两类属性：</p>
<ol>
<li>产品的多级体系划分属性（构成属性体系结构）：
<ol>
<li>SKU 编号$\rightarrow$小类描述$\rightarrow$大类描述$\rightarrow$部门描述</li>
<li>从左到右，每一级都是“多对一”的对应关系，从而构成一个关于商品的分类体系</li>
</ol>
</li>
<li>其它描述属性：
<ol>
<li>包装类型，脂肪含量，......</li>
<li>这类属性并不是产品体系的组成部分，但可以与产品的体系划分属性组合在一起进行有意义的分析应用</li>
</ol>
</li>
</ol>
<table>
<thead>
<tr>
<th><img src="/48925/image-20230131151951359.png" alt></th>
<th><img src="/48925/image-20230131151959598.png" alt></th>
</tr>
</thead>
</table>
<h4 id="维度设计-商场维度">维度设计-商场维度</h4>
<img src="/48925/image-20230131152031360.png" style="zoom:33%;">
<p>使用维度支架的方式连接，也就是首次开业日会作为 FK 连接到另一张表上。</p>
<h5 id="商场维度的属性">商场维度的属性</h5>
<ol>
<li>销售面积：
<ol>
<li>数值类型的字段，且是跨商场可相加的</li>
<li>但由于这是商场的一个不变属性，且大都用做查询分析报表的列标题，所以还是安排在商场维度表中</li>
</ol>
</li>
<li>首次开业日 与 最后一次重修日期
<ol>
<li>其取值来自于定义在前述的“日期维度”表上的视图</li>
<li>采用维度支架加以实现</li>
</ol>
</li>
</ol>
<h4 id="维度设计-促销维度">维度设计-促销维度</h4>
<ol>
<li>对商品促销活动的评判因素：
<ol>
<li>促销商品的销售分析：
<ol>
<li>在促销期间是否出现增长？</li>
<li>在促销进行之前或随后是否减少？</li>
</ol>
</li>
<li>相邻或同类的其它商品的销售是否出现相应的降低情况？</li>
<li>与促销商品同类的所有商品的销售是否出现总体增长？</li>
<li>促销是否赢利？（考虑促销活动自身的成本）</li>
</ol>
</li>
<li>存在多种不同的促销形式（降价，广告，展销，优惠券，...）
<ol>
<li>每一种类型的促销活动可以单独形成一个促销维度表</li>
<li>也可以将所有的促销活动揉合在一个促销维度表中（如下图）</li>
<li>促销关键字（PK）：促销名称、减价类型、促销媒体类型、广告类型、展览类型、优惠卷类型、广告媒体类型、展览提供者、促销价、促销起始日期、促销结束日期等</li>
</ol>
</li>
<li>维度的组合：
<ol>
<li>参与组合的维度高度相关，组合起来的维度就不会比分开的维度大许多</li>
<li>组合起来的维度能够高效地进行浏览</li>
</ol>
</li>
<li>维度的分散：
<ol>
<li>在用户分开考虑时，分开的维度更加容易理解</li>
<li>独立维度的管理对于组合维度来说，更加直截了当</li>
</ol>
</li>
<li>不在促销范围之内的商品销售事实如何在事实表中表示？
<ol>
<li>在促销维度表中定义一个特殊的“行”</li>
<li>在事实表中，所有没有参与促销活动的行（产品销售事实）都引用该特殊的“行”，以表示该维度值对事实表中的当前行不可用，也就是有为空的感觉。</li>
</ol>
</li>
</ol>
<img src="/48925/image-20230131152219272.png" style="zoom: 50%;">
<ol>
<li>在商品促销效果分析中，还有一类问题是上述的零售营销模型无法回答的：什么样的促销产品还没有卖出去？</li>
<li>需要另外一个非事实型事实表来记录每天每件商品的促销活动
<ol>
<li>促销范围事实表</li>
<li>不存在度量指标（仅记录各个维成员之间的关系）</li>
<li>为每天中每个商场的每个促销产品创建一行</li>
</ol>
</li>
</ol>
<img src="/48925/image-20230131152234023.png" style="zoom: 33%;">
<h4 id="维度设计-POS-事务编号">维度设计-POS 事务编号</h4>
<ol>
<li>退化维度：维度表为空，具体的维度值直接存放在事实表中</li>
<li>例如：
<ol>
<li>事务编号</li>
<li>订单编号</li>
<li>发票编号</li>
<li>提货单编号</li>
</ol>
</li>
<li>可能不同的部分关键字之间是存在内在关联的。</li>
<li>关联数据分析：比较重要的就是购物篮问题，也就是购物篮中哪些商品是关联的。</li>
<li>必须要有事务编号维度来保证维度 POS 事务编号是必要的。</li>
</ol>
<img src="/48925/image-20230131152308944.png" style="zoom: 50%;">
<h3 id="零售示例的多维模型">零售示例的多维模型</h3>
<p>事实表：</p>
<ol>
<li>销售量，销售额，成本额，毛利润</li>
<li>促销记录</li>
</ol>
<p>维度表：</p>
<ol>
<li>日期，商场，产品，促销</li>
<li>退化维度：POS 事务编号</li>
</ol>
<p>在零售多维模型上的数据访问：通过维度表中的维度属性访问事实表</p>
<h3 id="多维模型访问方式">多维模型访问方式</h3>
<img src="/48925/image-20230131152611966.png" style="zoom:33%;">
<ol>
<li>首先对具体的维度的部分进行制定。</li>
<li>使用二维数据模型来完成了多维数据模型的描述。</li>
</ol>
<h3 id="模型的演化">模型的演化</h3>
<ol>
<li>新的维度属性（例如，产品的全新描述属性）：
<ol>
<li>加入时间点前的，使用“不可用”进行填充</li>
<li>比如添加了是否转基因的条目，那么之前为空的部分，就用“不可用”进行填充。</li>
</ol>
</li>
<li>新的维度（例如，会员、店员、日间时间等分析的新角度）：
<ol>
<li>新的维表</li>
<li>在事实表中填加新的外关键字</li>
</ol>
</li>
<li>新的度量值事实：
<ol>
<li>添加新的度量值属性</li>
<li>需要考虑事实表粒度</li>
</ol>
</li>
<li>维度变得具有更多的粒度性：
<ol>
<li>建立新粒度层次上的维度表</li>
<li>可能带来新粒度层次上的事实表，从而需要同时建立新的维度表和事实表，新的维度表会添加新的事实。</li>
</ol>
</li>
<li>全新的数据源的加入，会同时牵涉现存的维度和不能预见的新维度：
<ol>
<li>新数据源几乎总是拥有自己的粒度和维度</li>
<li>建立新的事实表和维度表</li>
</ol>
</li>
</ol>
<h4 id="新加入的维度">新加入的维度</h4>
<img src="/48925/image-20230131152651205.png" style="zoom:50%;">
<p>事实表的粒度设计将影响到是否易于加入新的维度。</p>
<h4 id="维度的规范化处理">维度的规范化处理</h4>
<table>
<thead>
<tr>
<th>规范化</th>
<th>非规范化</th>
</tr>
</thead>
<tbody>
<tr>
<td>雪花模型</td>
<td>星形模型</td>
</tr>
<tr>
<td>复杂的表关系</td>
<td>简单的表关系</td>
</tr>
<tr>
<td>节省存储空间</td>
<td>记录之间存在数据冗余</td>
</tr>
<tr>
<td>连接的复杂，高开销</td>
<td>连接简单，低开销</td>
</tr>
<tr>
<td>低维度浏览能力</td>
<td>高维度浏览能力</td>
</tr>
<tr>
<td>不支持物理加速技术</td>
<td>支持物理加速技术</td>
</tr>
</tbody>
</table>
<img src="/48925/image-20230131152941386.png" style="zoom: 50%;">
<h4 id="避免维度使用过多（蜈蚣状事实表）">避免维度使用过多（蜈蚣状事实表）</h4>
<img src="/48925/image-20230131153001335.png" style="zoom: 50%;">
<h4 id="维度表中关键字的设计">维度表中关键字的设计</h4>
<p>代理关键字，避免直接使用操作型数据作为维度表和事实表的主关键字和外关键字</p>
<ol>
<li>可以缓冲操作型数据的变化对数据仓库数据的影响</li>
<li>性能优势：自然关键字不一定为数值类型，而如果是文本类型，则容易导致效率较低。</li>
<li>操作型数据可能无法作为关键字：数据库中自然关键字可以唯一确定，但是在数据仓库中则不一定，比如化学实验中的调单，需要纸质和电子同时保存，具有时效性 3 年，印刷一批单号为 1-100,000 的单子，可以使用 5 年，但是在操作型数据环境中可以保证唯一，但是进入到数据仓库中后，是无法按照单号唯一确定。</li>
<li>日期维度的特殊要求：有一些日期在真实场景中是不存在的。</li>
<li>历史一致性：两个关键字的两条记录对应同一实体在不同时间段的情况</li>
</ol>
<p>修改事实表中的关键字，则同时需要修改维度表和事实表，代价比较大。</p>
<p>我们选择使用产品关键字（代理关键字），而不是自然关键字。</p>
<img src="/48925/image-20230131153038079.png" style="zoom:33%;">
<h5 id="日期维度的特殊要求">日期维度的特殊要求</h5>
<p>SQL 日期不能为“日期待定”或“日期不可用”</p>
<ol>
<li>日期待定：事件会发生，但是不确定时间</li>
<li>日期不可用：事件不会再发生了</li>
</ol>
<p>日期维度的代理关键字应当按照有意义的连续次序进行分配：</p>
<ol>
<li>允许在日期关键字基础上进行物理分区和索引</li>
<li>1 月 1 日$\rightarrow$1，1 月 2 日$\rightarrow$2，2 月 1 日$\rightarrow$32</li>
<li>YYYY-MM-DD，是不合适的做法</li>
</ol>
<h4 id="市场篮子分析">市场篮子分析</h4>
<p>不使用 OLAP 或者数据挖掘工具。</p>
<p>事实表的抽取：</p>
<ol>
<li>从零售营销事实表中抽取形成新的事实表，以实现新的分析应用</li>
<li>例：商品促销活动实施效果分析</li>
</ol>
<img src="/48925/image-20230131153145924.png" alt="从购买事务移植的市场篮子事实表" style="zoom:33%;">
<p>比较 A 和 B 可以找到关联。</p>
<p>N 个产品，$N \times (N-1)$ 种组合。解决方式：使用粗过滤来过滤掉部分</p>
<ol>
<li>领域知识支持</li>
<li>层次式的分析：
<ol>
<li>类别（$25 \times 25$）</li>
<li>商标（$500 \times 500$）</li>
<li>产品（$10000 \times 10000$）</li>
</ol>
</li>
</ol>
<h3 id="总结">总结</h3>
<ol>
<li>维度建模时的步骤</li>
<li>找到最简单的模型进行构建</li>
</ol>
<h2 id="维度建模案例之二：库存管理">维度建模案例之二：库存管理</h2>
<h3 id="库存管理维度模型">库存管理维度模型</h3>
<p>内容：用于大型杂货连锁店营销事务的维度模型</p>
<p>主要概念：</p>
<ol>
<li>值链</li>
<li>三种事实表模型：事务，周期快照，累积快照
<ol>
<li>半加型事实</li>
<li>增强型库存事实</li>
</ol>
</li>
<li>数据仓库总线结构与矩阵</li>
<li>一致性维度与事实</li>
</ol>
<h3 id="值链">值链</h3>
<ol>
<li>由企业的关键业务组成</li>
<li>值链确定了企业主体活动的自然逻辑流程，并不是商业智能中特有的概念</li>
</ol>
<img src="/48925/image-20230131153555130.png" style="zoom: 67%;">
<ol start="3">
<li>其中的每一步业务处理都将产生大量的周期性事务记录（来自企业自身的业务处理系统）</li>
<li>决策支持系统的首要目标是监控关键处理过程的性能结果
<ol>
<li>其分析的依据是来自于每一步业务处理过程的事实表</li>
<li>从每一步业务处理过程的业务数据库中可以衍生出一个或多个事实表</li>
</ol>
</li>
<li>操作型数据环境认为重要，则在数据仓库中被认为是重要的概率比较高。</li>
</ol>
<h3 id="事实表粒度模型">事实表粒度模型</h3>
<p>三种互补的库存事实表粒度模型：</p>
<ol>
<li>库存周期快照（粒度最粗）：
<ol>
<li>定期生成每种商品的库存水平（数量）</li>
<li>可以使用冗余的数据存储方式来解决</li>
</ol>
</li>
<li>库存事务：记录影响库存水平的主要因素，包含商品的进/出仓库等事务</li>
<li>库存累积快照：记录每件商品的分发历史，直至其离开仓库为止</li>
</ol>
<h4 id="库存周期快照">库存周期快照</h4>
<h5 id="目标">目标</h5>
<ol>
<li>确保合适的商场在合适的时间中存在合适的商品</li>
<li>可最大限度地减少脱销现象，并减少存货维护的总体开销</li>
</ol>
<h5 id="四步维度建模">四步维度建模</h5>
<ol>
<li>零售商需要具备通过产品和商场分析出每天手头库存水平的能力</li>
<li>四步维度建模
<ol>
<li>业务处理过程：零售商场的库存</li>
<li>粒度：每个商场每天每种商品的库存</li>
<li>维度：最初的维度选择
<ol>
<li>日期、商场、商品</li>
<li>促销：如果我们认为这是有用的，那么我们可以这样做。</li>
</ol>
</li>
<li>事实（度量值）：库存数量</li>
</ol>
</li>
</ol>
<img src="/48925/image-20230131155024946.png" style="zoom: 67%;">
<ol start="3">
<li>维表设计：
<ol>
<li>日期维度表同“案例一，零售营销”中的日期维度表保持一致（公共维度）</li>
<li>产品与商场维度也可以保持一致（公共维度）</li>
</ol>
</li>
<li>也可以根据实际的分析需求进一步引入其他属性（公共维度本应考虑）
<ol>
<li>产品维度：最小重购数量</li>
<li>商场维度：冷冻、冷藏面积</li>
</ol>
</li>
<li>万一维度有缺失，则进行相应的演化即可</li>
</ol>
<img src="/48925/image-20230131155118593.png" style="zoom: 67%;">
<p>数据结构一样不代表数据一样。</p>
<h5 id="库存周期快照事实表与销售事务事实表的区别">库存周期快照事实表与销售事务事实表的区别</h5>
<ol>
<li>销售事实表是稀疏的，而库存事实表则是稠密的
<ol>
<li>在销售事实表中记录每天实际发生的商品销售情况</li>
<li>而库存事实表则需要记录每天、每种商品、在每个商场的库存情况（不管库存是否发生了实际的变化）</li>
</ol>
</li>
<li>解决办法：
<ol>
<li>随着时间的推移可降低周期快照的频度</li>
<li>最近 60 天内的以天为粒度单位的周期快照</li>
<li>最近 3 年内的以周为粒度单位的周期快照</li>
</ol>
</li>
</ol>
<h5 id="半加型事实">半加型事实</h5>
<ol>
<li>只在部分维度上具有可加性的度量值被称为“半加型事实”</li>
<li>在商品营销中，绝大部分的度量值在所有的维度范围内都具有极好的可加性</li>
<li>在库存快照模型中，“库存量”可以跨“产品”或“商场”进行汇总（具有可加性），但不具有跨“日期”的可加性</li>
<li>几种常见的半加型事实：
<ol>
<li>库存数量，银行帐户余额，温度，水位，含量......</li>
<li>用于记录静态水平的度量值在跨日期维度以及可能的其它维度范围内都是不可加的
<ol>
<li>对于不可加的度量值，可用的常用聚集方法如平均、统计</li>
<li>不能简单地利用 SQL 中的 AVG 函数来完成这样的平均、统计计算工作</li>
</ol>
</li>
</ol>
</li>
</ol>
<h5 id="分析操作">分析操作</h5>
<p>如果扩充事实表，则可以提供更多的分析操作：</p>
<ol>
<li>周转次数
<ol>
<li>日周转次数：$\frac{当日销售量}{当日持有量}$</li>
<li>年周转次数：$\frac{年销售总量}{年平均持有量}$</li>
</ol>
</li>
<li>日供给次数：$\frac{平均持有量}{平均销售量}$</li>
<li>库存毛利润 GMROI：</li>
</ol>
<p>$$
GMROI = \frac{总销售量 * (最新售价核算值 - 成本核算值)}{日平均持有量 * 平均售价核算值}
$$</p>
<img src="/48925/image-20230131155333494.png" style="zoom: 67%;">
<h5 id="事实表扩充">事实表扩充</h5>
<ol>
<li>库存数量（持有量，现有量）</li>
<li>销售量：在三个维度之间都是可加的</li>
<li>成本核算值：在三个维度之间都是可加的</li>
<li>最新售价核算值：在三个维度之间都是可加的</li>
</ol>
<p>处于同一张事实表中的上述度量值需要具有统一的统计粒度。</p>
<p>如 GMROI 的计算分量处于不同的事实表，并拥有不同的粒度，则需要分析展现工具进行额外处理</p>
<h4 id="库存事务">库存事务</h4>
<p>库存周期快照无法提供如下的分析操作，即没有办法获取以下的部分：粒度比较细的没有办法回答。</p>
<ol>
<li>发生过多少次产品入柜以后又在同一天的不同时间将它取出的情形？无法区分开是没有了，还是快速被取出了</li>
<li>从某厂家那里接收过多少次分开装运的货，以及是什么时候收到的？</li>
<li>哪些产品是由于出现多次检验不合格而导致向厂家退货的？</li>
</ol>
<p>频度测算和具体事务类型的计算需要库存事务模型的支持。</p>
<p>常见的库存事务类型：产品接收、产品送检、对检验合格的产品进行分发、将检验不合格的产品退给厂商、产品入柜、产品销售审批、产品出柜、运输前的产品包装向顾客发货、从顾客那里回收产品、对回收产品进行封存、从库存中删除产品。</p>
<p>库存事务记录：日期，产品，仓库，厂家，事务类型，数量（影响库存总量的值）。</p>
<p>事实表的粒度：每个库存事务对应着事实表中的一行</p>
<img src="/48925/image-20230131155500362.png" style="zoom: 67%;">
<h4 id="库存累积快照">库存累积快照</h4>
<p>模型思想：</p>
<ol>
<li>在事实表中，为每种特定商品的入库装运给出相应的一行记录</li>
<li>对产品装载处理情况的跟踪放在事实表的单行记录中，直到产品离开仓库为止，也可以实现对单件/批商品的处理情况进行跟踪（按照生命周期来开展）</li>
</ol>
<p>特点：</p>
<ol>
<li>库存累积快照事实表中存在多个取值为日期的外关键字</li>
<li>需要对事实表中的每一行进行多次的访问和修改操作</li>
<li>很少用于长期运行而需要不断进行补充的库存处理</li>
</ol>
<p>假定数据进入数据仓库的同时，伴随着一系列良好定义的活动或重要事件：接受、检验、入柜、销售批准、选取、装箱、起运。</p>
<p>一般希望数据仓库中的数据是只读的。</p>
<img src="/48925/image-20230131155552130.png" style="zoom:67%;">
<h3 id="主题的集成">主题的集成</h3>
<ol>
<li>集成的目的：
<ol>
<li>跨主题范围的数据查看分析。</li>
<li>可以使得来自不同的主题的度量值可以被组合到单个分析任务中去。</li>
</ol>
</li>
<li>集成的方式：共享公共的维度设计。</li>
<li>目前我们认为公共维度就是完全一样的，在第一个实例中我们已经完成了 POS 零售营销事务事实表。</li>
</ol>
<img src="/48925/image-20230131155606856.png" style="zoom: 50%;">
<h3 id="数据仓库总线结构">数据仓库总线结构</h3>
<h4 id="一种可以按增量开发方式分步建造企业数据仓库的方法">一种可以按增量开发方式分步建造企业数据仓库的方法</h4>
<ol>
<li>计算机中的总线</li>
<li>通过为数据仓库环境定义标准的总线接口，独立的数据集市就可以由不同的开发小组在不同的时间进行实现。只要遵循这个标准，独立的数据集市就可以插入到一起并有效地共享，比如数据集市：数据集市是不一定需要实施的，总线知识我们进行概念数据模型构建时的规范</li>
</ol>
<h4 id="一组综合的具有一致性的共用维度">一组综合的具有一致性的共用维度</h4>
<ol>
<li>通过设计出一整套在企业范围内具有统一解释的标准化维度与事实，从而可以对企业数据仓库的建设任务进行合理的分解，由不同的开发小组分阶段，或并行地进行数据仓库的建设</li>
<li>采用总线体系结构可以独立于技术手段和数据库平台</li>
</ol>
<h3 id="数据仓库总线矩阵">数据仓库总线矩阵</h3>
<img src="/48925/image-20230131155737982.png" style="zoom: 33%;">
<p>查看主题的上下文：</p>
<ol>
<li>如果这个主题并不是被公用的，那么问题不大</li>
<li>如果这个主题会被很多的主题使用，那么需要仔细设计</li>
</ol>
<h3 id="数据仓库总线矩阵-2">数据仓库总线矩阵</h3>
<table>
<thead>
<tr>
<th></th>
<th>公共维度</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>主题</td>
<td>日期</td>
<td>产品</td>
<td>商场</td>
<td>促销</td>
<td>仓库</td>
<td>厂家</td>
<td>合同</td>
<td>发货人</td>
</tr>
<tr>
<td>零售营销</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>零售库存</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>零售交货</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>仓库库存</td>
<td>x</td>
<td>x</td>
<td></td>
<td></td>
<td>x</td>
<td>x</td>
<td></td>
<td></td>
</tr>
<tr>
<td>仓库交货</td>
<td>x</td>
<td>x</td>
<td></td>
<td></td>
<td>x</td>
<td>x</td>
<td></td>
<td></td>
</tr>
<tr>
<td>购买订单</td>
<td>x</td>
<td>x</td>
<td></td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
</tbody>
</table>
<p>矩阵的行：对应着主题</p>
<ol>
<li>如果数据来源不同，功能不同，或者矩阵行代表的内容无法在单个迭代过程中合理完成，就应当创建独立的矩阵行</li>
<li>不能够再次进行细分的公共维度模型。</li>
<li>每一个主题都会包含三部分：
<ol>
<li>事务是什么</li>
<li>累积快照</li>
<li>周期快照</li>
</ol>
</li>
</ol>
<p>矩阵的列：对应着共享的公共维度。</p>
<p>总线矩阵就是在规划阶段使用的。</p>
<p>规划主题过程中必然不可能一蹴而就，不可能第一次使用很多的主题全部完成，我们使用原型法，先使用起来。</p>
<p>我们倾向于将一个分析域的主题放在一起进行构建，当我们成功构建分析域后，则其分析这个局部是最优的（也就是将最相似的主题放在一起）</p>
<h3 id="一致性维度">一致性维度</h3>
<p>一致性维度是进一步开发总线结构数据仓库系统的基础</p>
<ol>
<li>要么是同一的，要么是具有最佳粒度与细节性的维度在严格数学意义上的子集</li>
<li>一致的维度具有如下特征
<ol>
<li>一致的维度关键字</li>
<li>一致的属性列名字</li>
<li>一致的属性定义</li>
<li>一致的属性值</li>
</ol>
</li>
</ol>
<p>有表 A 和表 B，这时候有两张维表甲（生成自表 A）和乙（生成自表 B），如果甲和乙中有一致性维度，那么我们可以通过一个维度访问原表甲和乙。</p>
<p>一致的维度可能意味着是相同的维度表</p>
<ol>
<li>与它们相连的事实表具有完全相同的内容（不同的度量值）。例如：连接到销售事实表与库存事实表上的日期维度表是同一的，意味着销售事实表和库存事实表中的内容是相同的</li>
<li>这样的维度表在物理上可能是同一张表，也可能是不同的表，但它们应该具有相同数目的行、相同的关键字值、相同的属性标签、相同的属性定义与相同的属性值</li>
</ol>
<p>大多数一致的维度是在可能的最佳粒度层次（最细粒度）上定义的。</p>
<ol>
<li>顾客维：单个顾客</li>
<li>产品维：用以对产品进行跟踪的最低层次</li>
<li>日期维：天</li>
</ol>
<h4 id="不同粒度的维度">不同粒度的维度</h4>
<ol>
<li>原子型维度：在最佳粒度层次上的维度定义（最小的粒度）</li>
<li>上钻维度（roll-up dimensions）
<ol>
<li>在较高层次上的维度定义（较大的粒度），用以连接较高层次的事实表：日期维表（连接每日快照）vs. 周维表（连接每周快照）</li>
<li>如果上钻维度是基本层次上原子型维度严格意义上的子集，则堆积维度与原子型维度保持一致</li>
</ol>
</li>
</ol>
<h4 id="不同业务处理的事实粒度不同">不同业务处理的事实粒度不同</h4>
<p>产品维度 vs. 商标维度</p>
<img src="/48925/image-20230131160030346.png" style="zoom: 67%;">
<ol>
<li>商标维度表，从数据结构、数据内容和元组而言都是产品维度表的一个子集，那么则商标维度表和产品维度表是保持一致的。</li>
<li>我们将这个产品维表和商标维表合并后认为是一个公共维度，我们可以挑选出来部分属性，认为和原来的整体是保持一致的。</li>
<li>上图的例子是指有映射保持一致。</li>
</ol>
<p>两个处于相同细节层次上的维度表，如果它们均是另一个维表的子集，则它们也是一致的：</p>
<img src="/48925/image-20230131160100423.png" style="zoom:33%;">
<ol>
<li>没有映射关系，但是也保持一致的例子如上图所示。</li>
<li>全体产品维度中有的维度对于家用产品是没有意义的，所以家用产品的维度是小于全体产品维度。而家用产品和服装产品之间存在有公同属性</li>
<li>交集则会存在同时家用产品和服装产品的产品 A，产品 A 属于家用产品的属性和服装产品的属性具有不同和相似点，我们使用的是全体产品维度的值来连接两个事实表。</li>
<li>不拿掉用不到的维度除了浪费空间以外也不影响，说明使用一个一致性维度（我们设计了一个大的表，但是使用的是部分的一致性维度表）</li>
</ol>
<h3 id="一致性事实">一致性事实</h3>
<p>同样的事实在不同的数据备份中进行存储的一致性：</p>
<ol>
<li>取值单位的一致性</li>
<li>值的一致性</li>
<li>自然关键字的一致性</li>
</ol>
<p>一般说来，事实表数据不在多个数据备份间明确的进行拷贝。</p>
<p>数据仓库中一般不允许使用编码格式，但是如果存在有共识，比如 1 代表男性，则可以使用编码格式。</p>
<p>如果事实表存在于多个数据备份，那么支撑这些事实的定义和方程必须都是相同的。</p>
<p>如果无法使事实完全保持一致，那么应该对不同的解释给予不同的名称。</p>
<h2 id="多维建模案例之三：订单管理">多维建模案例之三：订单管理</h2>
<h3 id="订单管理">订单管理</h3>
<ol>
<li>订单事务方案</li>
<li>事实表规范化方面的考虑</li>
<li>维度设计策略
<ol>
<li>日期维度的角色模仿</li>
<li>维度表的多属性体系结构</li>
<li>杂项维度</li>
</ol>
</li>
<li>事实表设计策略
<ol>
<li>多种货币与计量单位</li>
<li>不同粒度层次上度量值的分配考虑</li>
<li>赢利与亏损事实的票据处理事务方案</li>
<li>订单处理流水线的累积快照方案</li>
</ol>
</li>
<li>三种不同类型事实表的比较</li>
<li>数据仓库中的实时分区</li>
</ol>
<h3 id="订单管理的引入">订单管理的引入</h3>
<h4 id="订单管理-2">订单管理</h4>
<ol>
<li>所关注的业务处理流程：报价，生成订单，安排生产计划，组织货物的装运发送，票据处理</li>
<li>所关注的分析对象：
<ol>
<li>数量：订购，生产，装运......</li>
<li>收入：订购额，贴现额，净订购额......</li>
</ol>
</li>
</ol>
<h4 id="数据仓库的总线矩阵子集（订单管理部分）">数据仓库的总线矩阵子集（订单管理部分）</h4>
<p>不打算多描述我们直接简写就可以过去，不用描述每一个项。</p>
<table>
<thead>
<tr>
<th></th>
<th>日期</th>
<th>产品</th>
<th>顾客</th>
<th>让利</th>
<th>营销代表</th>
<th>发货</th>
<th>货主</th>
</tr>
</thead>
<tbody>
<tr>
<td>报价</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td></td>
<td></td>
</tr>
<tr>
<td>订单</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td></td>
<td></td>
</tr>
<tr>
<td>装运</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td>发票</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
</tbody>
</table>
<h4 id="最基本的订单事务事实表">最基本的订单事务事实表</h4>
<ol>
<li>为订单的每个订单分列项建立一个记录行（元组）</li>
<li>所包含的度量值有：
<ol>
<li>订购量</li>
<li>订单增值总额：导出性属性值</li>
<li>订单贴现金额</li>
<li>订单增值余额（订单增值总额-贴现）</li>
<li>......</li>
</ol>
</li>
</ol>
<h3 id="订单事务事实表">订单事务事实表</h3>
<img src="/48925/image-20230131173645562.png" style="zoom:50%;">
<ol>
<li>我们是将总订购额、订单交易贴现金额和净订购额要不要包含在事实表中</li>
<li>在绝大多数情况下我们不进行事实表规范化，只有满足以下两个条件时才进行拆分。
<ol>
<li>事实行的事实设置比较稀疏</li>
<li>不在事实之间施加运算</li>
</ol>
</li>
<li>规范化
<ol>
<li>规范化拆分的时候往往后面的互斥属性会节约空间，但是前面的属性会冗余可能会导致浪费空间，需要进行考虑。</li>
<li>有上下文环境访问拆分后的表，需要用很多次查询才可以拿到原来应该得到的属性，也就是这种操作不一定节约空间，一定浪费时间</li>
</ol>
</li>
<li>约定了很多的日期，就应该有很多的维度用来表示日期</li>
</ol>
<h3 id="事实表的规范化考虑">事实表的规范化考虑</h3>
<p>事实表的规范化：将一张事实表中的多个度量值分解组装成多个事实表</p>
<h4 id="事实表规范化的目的">事实表规范化的目的</h4>
<p>在对事实表进行规范后，可以连同标识事实类型维度一起得到单一的一般性事实</p>
<h4 id="规范化的时机">规范化的时机</h4>
<ol>
<li>事实行的事实设置比较稀疏</li>
<li>不在事实之间施加运算</li>
</ol>
<h4 id="规范化的问题实例">规范化的问题实例</h4>
<ol>
<li>方案 A（反规范化）：假设有一个由 10 个外关键字属性，5 个度量值属性以及 100 万行元组所构成的事实表</li>
<li>方案 B（规范化）：将上述的一张事实表分解为只记录单个度量值的 5 张事实表</li>
</ol>
<table>
<thead>
<tr>
<th></th>
<th>方案 A</th>
<th>方案 B</th>
</tr>
</thead>
<tbody>
<tr>
<td>结构复杂性</td>
<td>1 张表，15 个属性</td>
<td>5 张表，55 个属性</td>
</tr>
<tr>
<td>数据量</td>
<td>1500 万个属性值</td>
<td>最多 5500 万个属性值</td>
</tr>
<tr>
<td>数据访问</td>
<td>可以直接在 SQL 语句中进行数学计算，以获得新的度量值</td>
<td>首先需要执行表的联接操作，然后才能进行数学计算。而联接操作需要更多的时间开销</td>
</tr>
</tbody>
</table>
<h4 id="规范化情况">规范化情况</h4>
<p>一般不考虑事实表的规范化。除非不同度量值的计算处于不同的粒度层次上，那么则需要将它们分解到不同的事实表中去</p>
<p>如果可以将“粗”粒度的度量值分配到“细”的粒度层次上，那么则可以在尽量细的粒度层次上通过统一粒度层次来建立一张统一的事实表：事实表中的粒度层次越“细”，则可以提供的分析操作就越多</p>
<p>反规范化节约空间又节约时间，所以我们乐意这样干，但是有时候反规范化会导致误导和粒度不兼容</p>
<ol>
<li>误导：部分属性或关键字的含义没有被用户恰当的理解到。</li>
</ol>
<h6 id="粒度无法统一的案例">粒度无法统一的案例</h6>
<p>订单的折扣：这个是按照订单作为单位</p>
<ol>
<li>$购买总金额 \times 订单折扣 = 实际购买金额$</li>
<li>按照摊派的思想，我们要将订单的折扣摊派给每一个元组，但是可能会导致分析误导：订单折扣和其他的部分关联非常大，订单折扣和谈判人员是有关的。</li>
</ol>
<p>这是针对订单事实的度量值，我们不能将其细化到订单分列项事实上</p>
<ol>
<li>虽然不影响整个订单的购买金额的计算，但是：</li>
<li>会影响到沿着商品维度（或其它订单分列项元组中的维度属性）的分析操作</li>
</ol>
<h3 id="维度设计策略">维度设计策略</h3>
<p>基于数据仓库总线的设计思想，订单管理维度模型可以与前述的其它维度模型共享一组公共的维度表，如日期维，产品维，顾客维......</p>
<p>针对订单管理的特殊性，在维度表的设计过程中还需要考虑下列问题：</p>
<ol>
<li>维度的角色模仿</li>
<li>维度表的多属性体系结构</li>
<li>杂项维度</li>
</ol>
<h3 id="日期维度的角色模仿">日期维度的角色模仿</h3>
<p>在基于多事务的订单管理事实表中，存在着若干个日期类型的外关键字：</p>
<ol>
<li>每一个日期外关键字都对应着订单处理过程中的某一个业务处理步骤，如：订单的创建日期，产品加工日期，成品入库日期，请求装运日期，计划装运日期，实际装运日期，到货日期，发票日期，......</li>
</ol>
<p>实现方式：</p>
<ol>
<li>为每个日期类型的外关键字建立一个独立的日期维表</li>
<li>所有日期类型的外关键字共享同一个物理的日期维表</li>
</ol>
<p>单个维度同时在同一个事实表出现几次：</p>
<ol>
<li>建立多组合的维度：订单日期 $\times$ 装货日期（365$\times$365）</li>
<li>角色模仿</li>
</ol>
<p>日期维度的角色模仿：</p>
<ol>
<li>后台只维持一个单一的日期维度表，类似数据库的 View</li>
<li>为事实表中的每一个日期外关键字建立一个日期维表上的视图，类似的也可以用上角色模仿（比如员工的模仿）</li>
<li>优点：降低存储空间开销，方便使用</li>
</ol>
<p>例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> ORDER_DATE(ORDER_DATE_KEY, ORDER_DAY_OF_WEEK,ORDER_MONTH,...)<br> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">SELECT</span> DATE_KEY, DAY_OF_WEEK,<span class="hljs-keyword">MONTH</span>,......<br>      <span class="hljs-keyword">FROM</span> <span class="hljs-type">DATE</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> REQ_SHIP_DATE(REQ_SHIP_DATE_KEY, REQ_SHIP_DAY_OF_WEEK, REQ_SHIP_MONTH,...)<br>   <span class="hljs-keyword">AS</span> <span class="hljs-keyword">SELECT</span> DATE_KEY, DAY_OF_WEEK,<span class="hljs-keyword">MONTH</span>,......<br>      <span class="hljs-keyword">FROM</span> <span class="hljs-type">DATE</span><br></code></pre></td></tr></table></figure>
<ol>
<li>日期维度在单个事实表中承担不同角色</li>
<li>映射一定是一对一的，可以用来连接若干个不同的度量值的。</li>
</ol>
<h3 id="维度表的属性体系结构">维度表的属性体系结构</h3>
<p>在一个维度表中：</p>
<ol>
<li>通常存在着若干组用于描述维度表中的元组在不同方面的描述属性</li>
<li>在许多非体系属性之外，存在一个或而多个属性体系结构</li>
</ol>
<p>例如：商品维</p>
<ol>
<li>子类描述，分类描述，部门描述</li>
<li>包装类型描述，包装尺寸</li>
<li>含脂量描述，食物类型描述</li>
<li>重量，重量单位，储藏类型描述</li>
<li>货架期限描述，货架宽、高、深</li>
<li>......</li>
</ol>
<p>星形模型 $\to$ 雪花模型，浏览性能 $\to$ 存储空间。</p>
<p>在雪花/雪暴模型中，能够通过子维度作为公共维度连接多个多维模型的，应充分考虑维度的规范化。</p>
<h3 id="收货顾客维度">收货顾客维度</h3>
<img src="/48925/image-20230131174515431.png" style="zoom:50%;">
<p>上图中的情况类似淘宝的收货地址。</p>
<ol>
<li>粒度：为每个分离的收货地址包含一行内容</li>
<li>收货顾客维表中的属性体系结构：
<ol>
<li>收货地址</li>
<li>收票地址</li>
<li>顾客机构体系：地址 - 顾客单位与签收单</li>
<li>营销机构</li>
</ol>
</li>
<li>营销机构（作为一个单独的维度还是放在顾客维度表）：
<ol>
<li>营销代表与收货地址之间的关系（同体系？）
<ol>
<li>“一对一”或“多对一”高度相关：合并为一个收货顾客维度</li>
<li>随着时间或产品产生变化：两个独立的维度</li>
</ol>
</li>
<li>如果营销代表与收货顾客独立地参与了其它的事实表，建立各自独立的维度表</li>
</ol>
</li>
<li>当实体之间存在固定的、不随时间变化的、强烈相关的关系时，需要作为单一维度进行建模，而其他情况下需要分割</li>
<li>需要考虑维度过多的情况，如果方案已经确定维度数量（例如，25）则充分考虑维度组合的问题</li>
</ol>
<h3 id="交易维度">交易维度</h3>
<p>如果期限、打折等交易信息存在相关，则组合成一个维度</p>
<img src="/48925/image-20230131174657276.png" style="zoom: 50%;">
<h3 id="订单编号退化维度">订单编号退化维度</h3>
<ol>
<li>来源于操作型数据环境的订单细节已经从订单标题中剥离出来形成独立的维度：
<ol>
<li>订单日期</li>
<li>收货顾客地址</li>
</ol>
</li>
<li>订单编号用于对订单上的<strong>分列项目</strong>进行分组，因此仍然有效</li>
<li>偶尔用于数据仓库反向连接操作型领域</li>
</ol>
<h3 id="杂项维度">杂项维度</h3>
<p>从复杂的数据源中提取与事实、维度相关的字段后，往往还有大量在小范围内选取离散值的指示符与标志，这些维度和其他维度都没有关联，他们之间也只有少量的关联，由于没有足够的空间，则将他们压缩到一个维度中。</p>
<ol>
<li>将标志与指示符不加改变地留在事实表行中$\rightarrow$事实表膨胀</li>
<li>将每个标志与指示符放在本身的单独维度中$\rightarrow$维度膨胀</li>
<li>将所有标志与指示符从设计中剥离出来$\rightarrow$删除难以理解的、杂乱的或者与分析操作无关的维度属性</li>
</ol>
<p>可以将它们组装成一个或多个独立的杂项维度表（junk dimension）</p>
<ol>
<li>杂项维度使用非编码属性</li>
<li>我们可以通过预先方式来确定杂项维度表：杂项维度中如果可以预先找到所有的可能属性组合，比如下图中的支付类型为信用卡和支付类型组是现金是不存在的。我们可以根据数据仓库分析是否有的元组没有被用到，如果用的比较常用则才使用杂项维度，不然可以用插入的方式。</li>
<li>杂项维度可以用来处理自由注释字段，比如调查问卷中的选填问答。</li>
</ol>
<table>
<thead>
<tr>
<th>订单指示符关键字</th>
<th>支付类型描述</th>
<th>支付类型组</th>
<th>订单出/入指示符</th>
<th>代办信用指示符</th>
<th>订单类型指示符</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>现金</td>
<td>现金</td>
<td>输入订单</td>
<td>可代办</td>
<td>一般</td>
</tr>
<tr>
<td>2</td>
<td>现金</td>
<td>现金</td>
<td>输入订单</td>
<td>非代办</td>
<td>展览</td>
</tr>
<tr>
<td>3</td>
<td>现金</td>
<td>现金</td>
<td>输入订单</td>
<td>非代办</td>
<td>示范</td>
</tr>
<tr>
<td>4</td>
<td>现金</td>
<td>现金</td>
<td>输出订单</td>
<td>可代办</td>
<td>一般</td>
</tr>
<tr>
<td>5</td>
<td>发现者信用卡</td>
<td>信用卡</td>
<td>输出订单</td>
<td>非代办</td>
<td>展览</td>
</tr>
<tr>
<td>6</td>
<td>发现者信用卡</td>
<td>信用卡</td>
<td>输入订单</td>
<td>可代办</td>
<td>一般</td>
</tr>
<tr>
<td>7</td>
<td>发现者信用卡</td>
<td>信用卡</td>
<td>输入订单</td>
<td>非代办</td>
<td>展览</td>
</tr>
<tr>
<td>8</td>
<td>发现者信用卡</td>
<td>信用卡</td>
<td>输入订单</td>
<td>非代办</td>
<td>示范</td>
</tr>
<tr>
<td>9</td>
<td>发现者信用卡</td>
<td>信用卡</td>
<td>输出订单</td>
<td>可代办</td>
<td>一般</td>
</tr>
<tr>
<td>10</td>
<td>发现者信用卡</td>
<td>信用卡</td>
<td>输出订单</td>
<td>非代办</td>
<td>展览</td>
</tr>
<tr>
<td>11</td>
<td>万事达信用卡</td>
<td>信用卡</td>
<td>输入订单</td>
<td>可代办</td>
<td>一般</td>
</tr>
<tr>
<td>12</td>
<td>万事达信用卡</td>
<td>信用卡</td>
<td>输入订单</td>
<td>非代办</td>
<td>展览</td>
</tr>
<tr>
<td>13</td>
<td>万事达信用卡</td>
<td>信用卡</td>
<td>输入订单</td>
<td>非代办</td>
<td>示范</td>
</tr>
<tr>
<td>14</td>
<td>万事达信用卡</td>
<td>信用卡</td>
<td>输出订单</td>
<td>可代办</td>
<td>一般</td>
</tr>
</tbody>
</table>
<p>杂项维度例子：</p>
<ol>
<li>录入成绩的人的这种信息本身没有分析的价值，A 还是 B 录入都没有影响，这种属性就是杂项维度。</li>
<li>用户是随心所欲的购买或有计划购买，可能这种信息本身只有很少的价值，但是本身也有一定的价值。</li>
</ol>
<p>预先为所有组合创建杂项维度行 vs. 实际遇到的组合创建杂项维度行：组合可能大小 vs. 组合预计大小</p>
<p>杂项维度可以用以维护附在事实行上的自由注释字段</p>
<ol>
<li>
<p>参数化自由注释字段</p>
</li>
<li>
<p>自由注释的数量远小于事实行的数量，需要引入“非注释行”的代理关键字</p>
</li>
<li>
<p>自由注释字段可以有很多组</p>
</li>
</ol>
<h3 id="多种流通货币">多种流通货币</h3>
<p>选择一个标准的通用货币，并建立其它货币与之转换关系：</p>
<ol>
<li>不同货币之间的汇率是随着时间变化的</li>
<li>同时货币之间的互兑汇率也是不尽相同的</li>
</ol>
<p>跨国企业的货币的结算方式是不同的，汇率也是在变化的，所以需要用存储汇率</p>
<p>建立货币转换事实表</p>
<p>建立货币维表：货币和国家之间不一一对应</p>
<img src="/48925/image-20230131174929188.png" style="zoom: 50%;">
<ol>
<li>红色货币计算由货币维度来存储计量</li>
<li>源-目标货币兑换率和目标-源货币兑换率并不互为倒数</li>
</ol>
<h3 id="粒度不同的标题与分列项事实">粒度不同的标题与分列项事实</h3>
<ol>
<li>订单的运费：仅适用于整份订单</li>
<li>描述：从订单到订购单中每一个商品</li>
<li>处理方法：
<ol>
<li>在较低层次事实表中尽可能包含所有可用的高层事实表中的事实
<ol>
<li>但这样的实现方式并不能适用于所有的情况</li>
<li>不能在同一个事实表中混用不同粒度的事实，解决办法：向下分配事实</li>
</ol>
</li>
<li>将运费与其他标题级事实展现在用于整个订购的聚集表中</li>
<li>高层事务进行分列来适应具体的分析需求</li>
</ol>
</li>
<li>订单标题事实到订单分列项的分配：订单标题事实由于包含订单折扣，所以是不可以替代的，设计到反规范化的问题。</li>
</ol>
<img src="/48925/image-20230131174952807.png" style="zoom:50%;">
<h3 id="装运发票事务">装运发票事务</h3>
<p>装运发票的内容：</p>
<ol>
<li>发货日期，目的地，顾客</li>
<li>具有多个分列项（对应着发送的不同商品）：不同的分列项有不同的数量、价格、贴现与打折等内容</li>
<li>发票总额</li>
</ol>
<p>装运发票事实表的设计：</p>
<ol>
<li>建立对应各个分列项的事实</li>
<li>“新”的维度：发货，货运人，顾客满意度</li>
</ol>
<p>发货维度：为每个制造商货栈或装货点建立一个维度元组，包括：名字，地址，联系人，存储设施类型等维度属性</p>
<p>货运人维度：描述将产品从制造商运送给顾客所使用的方法与运载工具</p>
<img src="/48925/image-20230131175333976.png" style="zoom: 50%;">
<img src="/48925/image-20230131175347214.png" style="zoom:25%;">
<h3 id="订单任务累积快照">订单任务累积快照</h3>
<img src="/48925/image-20230131175404614.png" style="zoom: 50%;">
<img src="/48925/image-20230131175422372.png" style="zoom:50%;">
<h3 id="支持多计量单位的事实表">支持多计量单位的事实表</h3>
<img src="/48925/image-20230131175438340.png" style="zoom:50%;">
<ol>
<li>其中的转换关系不一定存在</li>
<li>转换单位和比例因子并不由上下文来决定</li>
</ol>
<h3 id="三种类型事实表的比较">三种类型事实表的比较</h3>
<table>
<thead>
<tr>
<th>特征</th>
<th>事务粒度</th>
<th>周期快照粒度</th>
<th>累积快照粒度</th>
</tr>
</thead>
<tbody>
<tr>
<td>代表的时间段</td>
<td>时间点</td>
<td>规律性可预见间隔</td>
<td>不确定时间跨度，一般是短期</td>
</tr>
<tr>
<td>粒度</td>
<td>每个事务事件一行</td>
<td>每段一行</td>
<td>每个生命期一行</td>
</tr>
<tr>
<td>事实表加载</td>
<td>插入</td>
<td>插入</td>
<td>插入与更新</td>
</tr>
<tr>
<td>事实行更新</td>
<td>不重新存取</td>
<td>不重新存取</td>
<td>行为发生任何时候都要重新存取</td>
</tr>
<tr>
<td>日期维度</td>
<td>事务发生日期</td>
<td>时间段终止日期</td>
<td>标准关键环节的多个日期</td>
</tr>
<tr>
<td>事实</td>
<td>事务活动</td>
<td>预定时间间隔的性能</td>
<td>给定生命期的性能</td>
</tr>
</tbody>
</table>
<h3 id="实时分区">实时分区</h3>
<p>在数据仓库环境中，对实时业务数据的访问需要：</p>
<ol>
<li>在常规静态数据仓库的前面建立一个物理的实时分区</li>
<li>对实时分区的约束要求：
<ol>
<li>包括静态数据仓库最后一次更新以来出现的所有行为</li>
<li>尽可能无缝地连接到静态数据仓库事实表的粒度与内容上</li>
<li>能够轻松地建立索引，以致于总是可以不断吸纳新来的数据</li>
</ol>
</li>
</ol>
<p>三种不同类型的实时分区：</p>
<ol>
<li>事务粒度：当天的记录（并非统计结果）</li>
<li>周期快照：最近一个周期内的统计结果，对非/半加性事实的考虑</li>
<li>累积快照：只记录最近被更新的项</li>
</ol>
<p>大多情况下，在原来的数据仓库中有什么数据模型，那么在实时分区中也会有同样的事实粒度和周期粒度</p>
<h4 id="事实粒度">事实粒度</h4>
<p>实时分区具有与它的支撑静态事实表具有完全相同的维度。</p>
<p>可能完全不建立索引：</p>
<ol>
<li>为加载操作维护一个持续打开的窗口</li>
<li>没有时间系列可用</li>
</ol>
<p>避免包含聚集值，提供很快的加载性能的同时，提供快速的查询性能</p>
<h4 id="周期粒度">周期粒度</h4>
<p>静态数据仓库事实表具有一个周期粒度，实时分区可以看作是当前的累积月</p>
<p>实时分区是当前正在开发的月份的映像，随着月份的推进不断更新。半加性或全加性事实随报表不断调整</p>
<p>月份结束时累计起来的实时分区，作为最新月份加载到静态仓库。</p>
<h4 id="累积快照-2">累积快照</h4>
<p>静态数据仓库事实表采用累积快照时，实时分区仅仅包含当天更新的分列项。</p>
<p>当天结束时，实时分区包含了需要写到主要事实表上的记录的最新版本。</p>
<p>无需索引和聚集。</p>
<h2 id="多维建模案例之四，客户关系管理">多维建模案例之四，客户关系管理</h2>
<p>客户维度又想要当事实表，又想当维度表，也就是可以分析自己，也可以分析其他人。</p>
<h3 id="客户关系管理（CRM）">客户关系管理（CRM）</h3>
<ol>
<li>CRM 既包含操作处理，又包含分析处理</li>
<li>目标：
<ol>
<li>将分析中心转向客户对象</li>
<li>支持以客户为中心的分析应用</li>
</ol>
</li>
<li>建设步骤：
<ol>
<li>客户数据集成</li>
<li>客户信息的分析与挖掘</li>
</ol>
</li>
</ol>
<h3 id="客户数据的集成">客户数据的集成</h3>
<ol>
<li>客户信息中的姓名和地址的集成：
<ol>
<li>对姓名和地址进行解析，分成更细小的片断</li>
<li>对姓名和地址进行标准化</li>
</ol>
</li>
<li>客户数据的更新：
<ol>
<li>新客户的识别</li>
<li>老客户的信息更新（可能需要使用数据仓库中已有的历史数据）</li>
</ol>
</li>
</ol>
<h3 id="客户信息的分析与挖掘">客户信息的分析与挖掘</h3>
<ol>
<li>客户特征分类分析：新客户的发现</li>
<li>客户盈利分析：优质客户挖掘</li>
<li>客户行为分析：客户异常行为的发现</li>
<li>客户需求分析</li>
<li>客户反映分析：
<ol>
<li>提供一对一服务（one to one）</li>
<li>防止已有客户的流失</li>
</ol>
</li>
</ol>
<h3 id="客户维度">客户维度</h3>
<ol>
<li>CRM 的基础是一致性的公共客户维度</li>
<li>客户维度的特点：
<ol>
<li>特别多的元组：通常具有数百万行以上的元组。</li>
<li>特别多的属性：客户所具有的属性是非常多的。</li>
<li>快速变化的维度：部分属性是在随时变更的。</li>
</ol>
</li>
</ol>
<h3 id="姓名与地址的解析">姓名与地址的解析</h3>
<ol>
<li>将姓名与地址属性尽可能地拆分成一些基本的部分。</li>
<li>解析时的注意事项：
<ol>
<li>统一的表示形式</li>
<li>地址方面的差异</li>
<li>文化方面的差异</li>
</ol>
</li>
</ol>
<h3 id="客户维度示例">客户维度示例</h3>
<h4 id="过于一般的客户维度实例">过于一般的客户维度实例</h4>
<table>
<thead>
<tr>
<th style="text-align:left">维度属性</th>
<th>实例值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">姓名</td>
<td>R. Jane Smith 律师小姐</td>
</tr>
<tr>
<td style="text-align:left">地址-1</td>
<td>123 Main Rd. North West. Ste 100A</td>
</tr>
<tr>
<td style="text-align:left">地址-2</td>
<td>2346 信箱</td>
</tr>
<tr>
<td style="text-align:left">城市</td>
<td>康新敦</td>
</tr>
<tr>
<td style="text-align:left">州</td>
<td>阿肯色</td>
</tr>
<tr>
<td style="text-align:left">ZIP 编码</td>
<td>88887-2348</td>
</tr>
<tr>
<td style="text-align:left">电话</td>
<td>888-555-3333 转 776 555-4444（传真）</td>
</tr>
</tbody>
</table>
<img src="/48925/image-20230131212747510.png" style="zoom: 33%;">
<p>注意发现具有区分度的属性：街道、头衔等</p>
<table>
<thead>
<tr>
<th>维度属性</th>
<th>实例值</th>
</tr>
</thead>
<tbody>
<tr>
<td>办公电话国家编码</td>
<td>1</td>
</tr>
<tr>
<td>办公电话地区编码</td>
<td>888</td>
</tr>
<tr>
<td>办公电话号码</td>
<td>5553333</td>
</tr>
<tr>
<td>办公分机号</td>
<td>776</td>
</tr>
<tr>
<td>传真电话国家编码</td>
<td>1</td>
</tr>
<tr>
<td>传真电话地区编码</td>
<td>888</td>
</tr>
<tr>
<td>传真电话号码</td>
<td>5554444</td>
</tr>
<tr>
<td>电子信箱地址</td>
<td><a href="mailto:RJSmith@ABCGenlntl.com">RJSmith@ABCGenlntl.com</a></td>
</tr>
<tr>
<td>Web 站点</td>
<td><a target="_blank" rel="noopener" href="http://www.ABCGenlntl.com">www.ABCGenlntl.com</a></td>
</tr>
<tr>
<td>唯一客户标号</td>
<td>7346531</td>
</tr>
</tbody>
</table>
<p>唯一客户编号是用来反向连接操作型数据环境的。</p>
<h4 id="常见的其他客户属性-日期">常见的其他客户属性-日期</h4>
<ol>
<li>客户维度中，包含类型为日期的维度属性</li>
<li>为客户维度建立若干个日期维度表，如：
<ol>
<li>出生日期</li>
<li>首次购买日期</li>
<li>最后一次购买日期</li>
</ol>
</li>
</ol>
<h4 id="日期维度支架">日期维度支架</h4>
<img src="/48925/image-20230131212904629.png" style="zoom: 50%;">
<ol>
<li>首次购买日期维度连接过去是 FK</li>
<li>后面可能本身对应后台一个物理表</li>
</ol>
<h4 id="常见的其他客户属性-客户分类属性">常见的其他客户属性-客户分类属性</h4>
<img src="/48925/image-20230131212918418.png" style="zoom:33%;">
<p>根据客户的分类属性进行分类，来进行商品推荐等行为</p>
<h4 id="常见的其他客户属性-聚集事实属性">常见的其他客户属性-聚集事实属性</h4>
<p>用户经常需要执行基于聚集性能度量指标的客户信息查询，我们可以将用户最关心的聚集性能度量指标设计为客户维度表中的属性</p>
<ol>
<li>消费总额</li>
<li>平均消费额</li>
<li>单笔消费的最高额</li>
</ol>
<p>就是用来担任度量值的属性，有顾客消费总额、平均消费额和单笔消费的最高额，这个作为核心可以构建多维模型的</p>
<h3 id="低基数属性集的维数支架">低基数属性集的维数支架</h3>
<p>低基数属性：</p>
<ol>
<li>只有少量几个取值的属性</li>
<li>大量元组共享了相同的属性和属性组，这很可能就是我们看到的上下文信息</li>
</ol>
<p>支架维度：</p>
<ol>
<li>将一组低基数属性单独构成客户维度的一个维度（称为支架维度），从而使整个模型呈雪花状</li>
<li>支架维度中的数据一般是从外部数据提供者那里获得的，如：县人口统计支架维度</li>
<li>如果用户的查询工具坚持使用星型结构，那么可以通过视图定义来隐藏维度支架</li>
</ol>
<p>客户维度和支架维度（使用支架维度的好处）：</p>
<ol>
<li>客户维度往往和支架维度有相差悬殊的粒度</li>
<li>具有不同的管理与加载次数</li>
<li>可以节省客户维度表的存储空间</li>
<li>如果用户的查询工具坚持使用星型模型，那么可以通过视图定义来隐藏维度支架</li>
</ol>
<img src="/48925/image-20230131213030512.png" style="zoom: 50%;">
<p>雪花模型中的一部分就是用来完成这部分，单独放大看就是星型模型。</p>
<p>客户维度和县人口统计支架维度的变化速度也是不一样的。</p>
<p>数据仓库刷新频率可以不一样，维表中如果有一个属性发生了变化，为了更新数据历史完整化，那么我们必须要复制一个元组，如果没有维度支架，那么就要复制整体，而如果有维度支架则只需要复制部分。</p>
<h3 id="大型变化客户维度（重要）">大型变化客户维度（重要）</h3>
<p>在数据仓库的维度模型中，部分维度属性是会随时间而发生变化的。若只是将这些变化的维度属性值作简单的修正，即在维度表中只保留该维度属性的当前值，这会直接影响到对事实表中该维度属性所对应的事实数据元组的访问，特别是无法根据维度属性值的变化情况来进行分析处理。</p>
<p>维度表的划分（根据稳定性划分）</p>
<ol>
<li>稳定维度（done）</li>
<li>渐变维度</li>
<li>快变维度</li>
</ol>
<h4 id="Recall：历史完整性">Recall：历史完整性</h4>
<img src="/48925/image-20230131213130286.png" style="zoom:50%;">
<h4 id="渐变维度">渐变维度</h4>
<p>渐变维度的处理办法：</p>
<ol>
<li>类型 1：改写属性值</li>
<li>类型 2：添加维度行</li>
<li>类型 3：添加维度列</li>
<li>类型 6：1+2+3</li>
</ol>
<p>为了保证维度完整性</p>
<h5 id="类型-1：改写属性值">类型 1：改写属性值</h5>
<p>容易实现，但不能对旧属性值的任何历史数据进行维护（无法保证历史一致性）。</p>
<p>不做任何处理，只需要保有最新的数据即可。</p>
<img src="/48925/image-20230131214235147.png" style="zoom: 50%;">
<h5 id="类型-2：添加维度行">类型 2：添加维度行</h5>
<p>用两个元组来代表不同的情况：</p>
<ol>
<li>
<p>添加维度行是准确跟踪渐变属性的主要方法，也是跟踪历史变化的最常用的方式。</p>
</li>
<li>
<p>通过引入新的行用来反映新的属性值</p>
<ol>
<li>往往会导致维度行的膨胀</li>
</ol>
</li>
<li>
<p>可以引入生效或截止日期</p>
</li>
</ol>
<img src="/48925/image-20230131214241659.png" style="zoom:50%;">
<h5 id="类型-3：添加维度列">类型 3：添加维度列</h5>
<p>使用维度列保存旧的属性值，但不适合跟踪维度属性大量变化。</p>
<p>设计维表的时候就设计预留位置来保存变更信息。有的时候是没有问题的，因为在业务中可能是有限制的，有上下文环境的，比如最多变化几次。</p>
<p>但是不可能所有属性都能确定有几次。</p>
<img src="/48925/image-20230131214312295.png" style="zoom:50%;">
<h5 id="类型-6（2-3-1）">类型 6（2+3+1）</h5>
<img src="/48925/image-20230131214317478.png" style="zoom: 33%;">
<p>效率是最高的：</p>
<ol>
<li>列不能做连接操作，但是查看起来快</li>
<li>跟踪近期变化，我们聚焦行就可以</li>
<li>跟踪历史变化，我们聚焦列就可以</li>
</ol>
<h4 id="快变维度">快变维度</h4>
<h5 id="快变维度的处理办法">快变维度的处理办法</h5>
<h6 id="微型维度">微型维度</h6>
<ol>
<li>将分析频率高或变化频率大的属性拆成为独立的微型维度（维度支架?），裂解后我们使用 FK 来连接上下文，如果选择类型 2 或类型 6 来处理，都需要来复制某些元组，而微型维度使得我们需要复制存储的元组大小变小。</li>
<li>例如：客户维度中的年龄，性别，收入水平等属性，它们的每一种取值组合构成微型维度表中的一行</li>
</ol>
<h6 id="预设波段">预设波段</h6>
<ol>
<li>对于诸如收入与购买总额等不断变化的属性，应该被转换成呈波段分布的范围，即进行<strong>离散化</strong>处理，使其只能在数目相当小的离散值中取值，以减少维度表中的数据量</li>
<li>将里面的值变化为区间，使用区间标签来作为实际的值</li>
</ol>
<h5 id="人口微型维度的样本行-微型维度">人口微型维度的样本行-微型维度</h5>
<p>可以<strong>将微型维度表独立于客户维度之外</strong>，直接附加在事实表上，从而在基于微型维度属性进行分析操作时，可以<strong>避开数量庞大的客户维度</strong>，提高分析效率。</p>
<img src="/48925/image-20230131214451561.png" style="zoom: 67%;">
<h5 id="人口微型维度的样本行-预设波段">人口微型维度的样本行-预设波段</h5>
<p>我们可以用预设波段来存储，比如划分为低中高三个维度。</p>
<table>
<thead>
<tr>
<th><strong>人口关键字</strong></th>
<th><strong>年龄</strong></th>
<th><strong>性别</strong></th>
<th><strong>收入水平</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>20~24</td>
<td>男</td>
<td>小于$20000</td>
</tr>
<tr>
<td>2</td>
<td>20~24</td>
<td>男</td>
<td>$20000~$24999</td>
</tr>
<tr>
<td>3</td>
<td>20~24</td>
<td>男</td>
<td>$25000~$29999</td>
</tr>
<tr>
<td>18</td>
<td>25~29</td>
<td>男</td>
<td>$20000~$24999</td>
</tr>
<tr>
<td>19</td>
<td>25~29</td>
<td>男</td>
<td>$25000~$29999</td>
</tr>
</tbody>
</table>
<h3 id="商务客户体系结构">商务客户体系结构</h3>
<p>深度不变体系：层数固定、可以预见的客户维度</p>
<p>深度可变体系：层数不固定的客户维度</p>
<p>如果我们客户不是自然人，而是法人，那么可能会有层次不固定的树状结构，不想要修改客户维度（保持一致性维度、保持公共总线）。</p>
<img src="/48925/image-20230131214518680.png" style="zoom:33%;">
<p>比如图上客户 1-8 所有客户所关联的某个度量值，或者是客户 4-6 的所有客户所关联的某个度量值</p>
<h4 id="深度可变体系客户维度">深度可变体系客户维度</h4>
<h5 id="桥接表-自顶向下">桥接表 - 自顶向下</h5>
<ol>
<li>客户维度对应客户体系桥中的父客户关键字</li>
<li>虚线框根据客户维度而言就是一张事实表</li>
<li>在桥中间我们给定了父子客户关系</li>
</ol>
<img src="/48925/image-20230131214547627.png" style="zoom: 50%;">
<h5 id="桥接表-自下而上">桥接表 - 自下而上</h5>
<p>客户维度对应客户体系桥中的子客户关键字。</p>
<img src="/48925/image-20230131214600275.png" style="zoom:50%;">
<h4 id="体系桥接连表样本行">体系桥接连表样本行</h4>
<p>体系桥接连表样本行数计算公式：</p>
<ol>
<li>用每层的取值数目乘以层深度（从顶层开始计数），然后将乘积相加起来</li>
<li>$体系桥接表样本行数 = \sum( 层取值数目 \times 层深度 )$</li>
</ol>
<p>例：$1 \times 1+2 \times 2+3 \times 3+2 \times 4 = 22$</p>
<p>下图是树的二维化表结构，我们可以写出一个查询找到所要求的的目标结果。</p>
<img src="/48925/image-20230131214647986.png" style="zoom: 80%;">

    </div>

    
    
    
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechat-award.jpg" alt="EagleBear2002 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.jpg" alt="EagleBear2002 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>


      <footer class="post-footer">

        
  <div class="post-widgets">
    <div class="wp_rating">
      <div id="wpac-rating"></div>
    </div>
  </div>


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/62073/" rel="prev" title="商务智能-04-数据仓库的设计">
      <i class="fa fa-chevron-left"></i> 商务智能-04-数据仓库的设计
    </a></div>
      <div class="post-nav-item">
    <a href="/29906/" rel="next" title="商务智能-06-数据挖掘">
      商务智能-06-数据挖掘 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E5%BB%BA%E6%A8%A1%E4%B8%AD%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-number">1.</span> <span class="nav-text">维度建模中的基本概念</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%AE%9E%E8%A1%A8"><span class="nav-number">1.1.</span> <span class="nav-text">事实表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1"><span class="nav-number">1.1.1.</span> <span class="nav-text">事务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%91%A8%E6%9C%9F%E5%BF%AB%E7%85%A7"><span class="nav-number">1.1.2.</span> <span class="nav-text">周期快照</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B4%AF%E7%A7%AF%E5%BF%AB%E7%85%A7"><span class="nav-number">1.1.3.</span> <span class="nav-text">累积快照</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%AE%9E%E8%A1%A8%E4%B8%AD%E7%9A%84%E5%BA%A6%E9%87%8F%E5%80%BC"><span class="nav-number">1.1.4.</span> <span class="nav-text">事实表中的度量值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%AE%9E%E8%A1%A8%E4%B8%AD%E7%9A%84%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">1.1.5.</span> <span class="nav-text">事实表中的关键字</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E8%A1%A8"><span class="nav-number">1.2.</span> <span class="nav-text">维度表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E8%A1%A8%E7%9A%84%E5%B1%9E%E6%80%A7%E7%BB%84%E6%88%90"><span class="nav-number">1.2.1.</span> <span class="nav-text">维度表的属性组成</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E5%B1%9E%E6%80%A7"><span class="nav-number">1.2.2.</span> <span class="nav-text">维度属性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%AE%9E%E4%B8%8E%E7%BB%B4%E5%BA%A6%E7%9A%84%E8%9E%8D%E5%90%88"><span class="nav-number">1.3.</span> <span class="nav-text">事实与维度的融合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E5%BB%BA%E6%A8%A1%E6%A1%88%E4%BE%8B"><span class="nav-number">1.4.</span> <span class="nav-text">维度建模案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E5%BB%BA%E6%A8%A1%E6%A1%88%E4%BE%8B%E4%B9%8B%E4%B8%80%EF%BC%9A%E9%9B%B6%E5%94%AE%E8%90%A5%E9%94%80"><span class="nav-number">2.</span> <span class="nav-text">维度建模案例之一：零售营销</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E5%BB%BA%E6%A8%A1%E7%9A%84%E8%AE%BE%E8%AE%A1%E8%BF%87%E7%A8%8B"><span class="nav-number">2.1.</span> <span class="nav-text">维度建模的设计过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%B6%E5%94%AE%E8%90%A5%E9%94%80%E7%9A%84%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="nav-number">2.2.</span> <span class="nav-text">零售营销的需求分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E5%BB%BA%E6%A8%A1%E7%9A%84%E8%AE%BE%E8%AE%A1%E8%BF%87%E7%A8%8B-2"><span class="nav-number">2.3.</span> <span class="nav-text">维度建模的设计过程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%89%E5%AE%9A%E7%BB%B4%E5%BA%A6"><span class="nav-number">2.3.1.</span> <span class="nav-text">选定维度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A1%AE%E5%AE%9A%E4%BA%8B%E5%AE%9E"><span class="nav-number">2.3.2.</span> <span class="nav-text">确定事实</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E8%AE%BE%E8%AE%A1-%E6%97%A5%E6%9C%9F%E7%BB%B4%E5%BA%A6"><span class="nav-number">2.3.3.</span> <span class="nav-text">维度设计-日期维度</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E7%BB%B4%E5%BA%A6%E4%B8%AD%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="nav-number">2.3.3.1.</span> <span class="nav-text">日期维度中的属性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E7%BB%B4%E5%BA%A6%E8%A1%A8"><span class="nav-number">2.3.3.2.</span> <span class="nav-text">日期维度表</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E8%AE%BE%E8%AE%A1-%E4%BA%A7%E5%93%81%E7%BB%B4%E5%BA%A6"><span class="nav-number">2.3.4.</span> <span class="nav-text">维度设计-产品维度</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BA%A7%E5%93%81%E7%BB%B4%E5%BA%A6%E8%A1%A8%EF%BC%88%E9%83%A8%E5%88%86%EF%BC%89"><span class="nav-number">2.3.4.1.</span> <span class="nav-text">产品维度表（部分）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BA%A7%E5%93%81%E7%BB%B4%E5%BA%A6%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="nav-number">2.3.4.2.</span> <span class="nav-text">产品维度的属性</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E8%AE%BE%E8%AE%A1-%E5%95%86%E5%9C%BA%E7%BB%B4%E5%BA%A6"><span class="nav-number">2.3.5.</span> <span class="nav-text">维度设计-商场维度</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%95%86%E5%9C%BA%E7%BB%B4%E5%BA%A6%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="nav-number">2.3.5.1.</span> <span class="nav-text">商场维度的属性</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E8%AE%BE%E8%AE%A1-%E4%BF%83%E9%94%80%E7%BB%B4%E5%BA%A6"><span class="nav-number">2.3.6.</span> <span class="nav-text">维度设计-促销维度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E8%AE%BE%E8%AE%A1-POS-%E4%BA%8B%E5%8A%A1%E7%BC%96%E5%8F%B7"><span class="nav-number">2.3.7.</span> <span class="nav-text">维度设计-POS 事务编号</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%B6%E5%94%AE%E7%A4%BA%E4%BE%8B%E7%9A%84%E5%A4%9A%E7%BB%B4%E6%A8%A1%E5%9E%8B"><span class="nav-number">2.4.</span> <span class="nav-text">零售示例的多维模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E7%BB%B4%E6%A8%A1%E5%9E%8B%E8%AE%BF%E9%97%AE%E6%96%B9%E5%BC%8F"><span class="nav-number">2.5.</span> <span class="nav-text">多维模型访问方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%BC%94%E5%8C%96"><span class="nav-number">2.6.</span> <span class="nav-text">模型的演化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B0%E5%8A%A0%E5%85%A5%E7%9A%84%E7%BB%B4%E5%BA%A6"><span class="nav-number">2.6.1.</span> <span class="nav-text">新加入的维度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E7%9A%84%E8%A7%84%E8%8C%83%E5%8C%96%E5%A4%84%E7%90%86"><span class="nav-number">2.6.2.</span> <span class="nav-text">维度的规范化处理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%81%BF%E5%85%8D%E7%BB%B4%E5%BA%A6%E4%BD%BF%E7%94%A8%E8%BF%87%E5%A4%9A%EF%BC%88%E8%9C%88%E8%9A%A3%E7%8A%B6%E4%BA%8B%E5%AE%9E%E8%A1%A8%EF%BC%89"><span class="nav-number">2.6.3.</span> <span class="nav-text">避免维度使用过多（蜈蚣状事实表）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E8%A1%A8%E4%B8%AD%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="nav-number">2.6.4.</span> <span class="nav-text">维度表中关键字的设计</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E7%BB%B4%E5%BA%A6%E7%9A%84%E7%89%B9%E6%AE%8A%E8%A6%81%E6%B1%82"><span class="nav-number">2.6.4.1.</span> <span class="nav-text">日期维度的特殊要求</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%82%E5%9C%BA%E7%AF%AE%E5%AD%90%E5%88%86%E6%9E%90"><span class="nav-number">2.6.5.</span> <span class="nav-text">市场篮子分析</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">2.7.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E5%BB%BA%E6%A8%A1%E6%A1%88%E4%BE%8B%E4%B9%8B%E4%BA%8C%EF%BC%9A%E5%BA%93%E5%AD%98%E7%AE%A1%E7%90%86"><span class="nav-number">3.</span> <span class="nav-text">维度建模案例之二：库存管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%93%E5%AD%98%E7%AE%A1%E7%90%86%E7%BB%B4%E5%BA%A6%E6%A8%A1%E5%9E%8B"><span class="nav-number">3.1.</span> <span class="nav-text">库存管理维度模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%80%BC%E9%93%BE"><span class="nav-number">3.2.</span> <span class="nav-text">值链</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%AE%9E%E8%A1%A8%E7%B2%92%E5%BA%A6%E6%A8%A1%E5%9E%8B"><span class="nav-number">3.3.</span> <span class="nav-text">事实表粒度模型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%93%E5%AD%98%E5%91%A8%E6%9C%9F%E5%BF%AB%E7%85%A7"><span class="nav-number">3.3.1.</span> <span class="nav-text">库存周期快照</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%9B%AE%E6%A0%87"><span class="nav-number">3.3.1.1.</span> <span class="nav-text">目标</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9B%9B%E6%AD%A5%E7%BB%B4%E5%BA%A6%E5%BB%BA%E6%A8%A1"><span class="nav-number">3.3.1.2.</span> <span class="nav-text">四步维度建模</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%93%E5%AD%98%E5%91%A8%E6%9C%9F%E5%BF%AB%E7%85%A7%E4%BA%8B%E5%AE%9E%E8%A1%A8%E4%B8%8E%E9%94%80%E5%94%AE%E4%BA%8B%E5%8A%A1%E4%BA%8B%E5%AE%9E%E8%A1%A8%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">3.3.1.3.</span> <span class="nav-text">库存周期快照事实表与销售事务事实表的区别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8D%8A%E5%8A%A0%E5%9E%8B%E4%BA%8B%E5%AE%9E"><span class="nav-number">3.3.1.4.</span> <span class="nav-text">半加型事实</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%86%E6%9E%90%E6%93%8D%E4%BD%9C"><span class="nav-number">3.3.1.5.</span> <span class="nav-text">分析操作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BA%8B%E5%AE%9E%E8%A1%A8%E6%89%A9%E5%85%85"><span class="nav-number">3.3.1.6.</span> <span class="nav-text">事实表扩充</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%93%E5%AD%98%E4%BA%8B%E5%8A%A1"><span class="nav-number">3.3.2.</span> <span class="nav-text">库存事务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%93%E5%AD%98%E7%B4%AF%E7%A7%AF%E5%BF%AB%E7%85%A7"><span class="nav-number">3.3.3.</span> <span class="nav-text">库存累积快照</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E9%A2%98%E7%9A%84%E9%9B%86%E6%88%90"><span class="nav-number">3.4.</span> <span class="nav-text">主题的集成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%80%BB%E7%BA%BF%E7%BB%93%E6%9E%84"><span class="nav-number">3.5.</span> <span class="nav-text">数据仓库总线结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%80%E7%A7%8D%E5%8F%AF%E4%BB%A5%E6%8C%89%E5%A2%9E%E9%87%8F%E5%BC%80%E5%8F%91%E6%96%B9%E5%BC%8F%E5%88%86%E6%AD%A5%E5%BB%BA%E9%80%A0%E4%BC%81%E4%B8%9A%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">3.5.1.</span> <span class="nav-text">一种可以按增量开发方式分步建造企业数据仓库的方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%80%E7%BB%84%E7%BB%BC%E5%90%88%E7%9A%84%E5%85%B7%E6%9C%89%E4%B8%80%E8%87%B4%E6%80%A7%E7%9A%84%E5%85%B1%E7%94%A8%E7%BB%B4%E5%BA%A6"><span class="nav-number">3.5.2.</span> <span class="nav-text">一组综合的具有一致性的共用维度</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%80%BB%E7%BA%BF%E7%9F%A9%E9%98%B5"><span class="nav-number">3.6.</span> <span class="nav-text">数据仓库总线矩阵</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%80%BB%E7%BA%BF%E7%9F%A9%E9%98%B5-2"><span class="nav-number">3.7.</span> <span class="nav-text">数据仓库总线矩阵</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E8%87%B4%E6%80%A7%E7%BB%B4%E5%BA%A6"><span class="nav-number">3.8.</span> <span class="nav-text">一致性维度</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8D%E5%90%8C%E7%B2%92%E5%BA%A6%E7%9A%84%E7%BB%B4%E5%BA%A6"><span class="nav-number">3.8.1.</span> <span class="nav-text">不同粒度的维度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8D%E5%90%8C%E4%B8%9A%E5%8A%A1%E5%A4%84%E7%90%86%E7%9A%84%E4%BA%8B%E5%AE%9E%E7%B2%92%E5%BA%A6%E4%B8%8D%E5%90%8C"><span class="nav-number">3.8.2.</span> <span class="nav-text">不同业务处理的事实粒度不同</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E8%87%B4%E6%80%A7%E4%BA%8B%E5%AE%9E"><span class="nav-number">3.9.</span> <span class="nav-text">一致性事实</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E7%BB%B4%E5%BB%BA%E6%A8%A1%E6%A1%88%E4%BE%8B%E4%B9%8B%E4%B8%89%EF%BC%9A%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86"><span class="nav-number">4.</span> <span class="nav-text">多维建模案例之三：订单管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86"><span class="nav-number">4.1.</span> <span class="nav-text">订单管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E7%9A%84%E5%BC%95%E5%85%A5"><span class="nav-number">4.2.</span> <span class="nav-text">订单管理的引入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86-2"><span class="nav-number">4.2.1.</span> <span class="nav-text">订单管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E7%9A%84%E6%80%BB%E7%BA%BF%E7%9F%A9%E9%98%B5%E5%AD%90%E9%9B%86%EF%BC%88%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E9%83%A8%E5%88%86%EF%BC%89"><span class="nav-number">4.2.2.</span> <span class="nav-text">数据仓库的总线矩阵子集（订单管理部分）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%80%E5%9F%BA%E6%9C%AC%E7%9A%84%E8%AE%A2%E5%8D%95%E4%BA%8B%E5%8A%A1%E4%BA%8B%E5%AE%9E%E8%A1%A8"><span class="nav-number">4.2.3.</span> <span class="nav-text">最基本的订单事务事实表</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A2%E5%8D%95%E4%BA%8B%E5%8A%A1%E4%BA%8B%E5%AE%9E%E8%A1%A8"><span class="nav-number">4.3.</span> <span class="nav-text">订单事务事实表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%AE%9E%E8%A1%A8%E7%9A%84%E8%A7%84%E8%8C%83%E5%8C%96%E8%80%83%E8%99%91"><span class="nav-number">4.4.</span> <span class="nav-text">事实表的规范化考虑</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%AE%9E%E8%A1%A8%E8%A7%84%E8%8C%83%E5%8C%96%E7%9A%84%E7%9B%AE%E7%9A%84"><span class="nav-number">4.4.1.</span> <span class="nav-text">事实表规范化的目的</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%84%E8%8C%83%E5%8C%96%E7%9A%84%E6%97%B6%E6%9C%BA"><span class="nav-number">4.4.2.</span> <span class="nav-text">规范化的时机</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%84%E8%8C%83%E5%8C%96%E7%9A%84%E9%97%AE%E9%A2%98%E5%AE%9E%E4%BE%8B"><span class="nav-number">4.4.3.</span> <span class="nav-text">规范化的问题实例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%84%E8%8C%83%E5%8C%96%E6%83%85%E5%86%B5"><span class="nav-number">4.4.4.</span> <span class="nav-text">规范化情况</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E7%B2%92%E5%BA%A6%E6%97%A0%E6%B3%95%E7%BB%9F%E4%B8%80%E7%9A%84%E6%A1%88%E4%BE%8B"><span class="nav-number">4.4.4.1.</span> <span class="nav-text">粒度无法统一的案例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E8%AE%BE%E8%AE%A1%E7%AD%96%E7%95%A5"><span class="nav-number">4.5.</span> <span class="nav-text">维度设计策略</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E7%BB%B4%E5%BA%A6%E7%9A%84%E8%A7%92%E8%89%B2%E6%A8%A1%E4%BB%BF"><span class="nav-number">4.6.</span> <span class="nav-text">日期维度的角色模仿</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%B4%E5%BA%A6%E8%A1%A8%E7%9A%84%E5%B1%9E%E6%80%A7%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="nav-number">4.7.</span> <span class="nav-text">维度表的属性体系结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%B6%E8%B4%A7%E9%A1%BE%E5%AE%A2%E7%BB%B4%E5%BA%A6"><span class="nav-number">4.8.</span> <span class="nav-text">收货顾客维度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%A4%E6%98%93%E7%BB%B4%E5%BA%A6"><span class="nav-number">4.9.</span> <span class="nav-text">交易维度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A2%E5%8D%95%E7%BC%96%E5%8F%B7%E9%80%80%E5%8C%96%E7%BB%B4%E5%BA%A6"><span class="nav-number">4.10.</span> <span class="nav-text">订单编号退化维度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%82%E9%A1%B9%E7%BB%B4%E5%BA%A6"><span class="nav-number">4.11.</span> <span class="nav-text">杂项维度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E7%A7%8D%E6%B5%81%E9%80%9A%E8%B4%A7%E5%B8%81"><span class="nav-number">4.12.</span> <span class="nav-text">多种流通货币</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B2%92%E5%BA%A6%E4%B8%8D%E5%90%8C%E7%9A%84%E6%A0%87%E9%A2%98%E4%B8%8E%E5%88%86%E5%88%97%E9%A1%B9%E4%BA%8B%E5%AE%9E"><span class="nav-number">4.13.</span> <span class="nav-text">粒度不同的标题与分列项事实</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A3%85%E8%BF%90%E5%8F%91%E7%A5%A8%E4%BA%8B%E5%8A%A1"><span class="nav-number">4.14.</span> <span class="nav-text">装运发票事务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A2%E5%8D%95%E4%BB%BB%E5%8A%A1%E7%B4%AF%E7%A7%AF%E5%BF%AB%E7%85%A7"><span class="nav-number">4.15.</span> <span class="nav-text">订单任务累积快照</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%AF%E6%8C%81%E5%A4%9A%E8%AE%A1%E9%87%8F%E5%8D%95%E4%BD%8D%E7%9A%84%E4%BA%8B%E5%AE%9E%E8%A1%A8"><span class="nav-number">4.16.</span> <span class="nav-text">支持多计量单位的事实表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E7%A7%8D%E7%B1%BB%E5%9E%8B%E4%BA%8B%E5%AE%9E%E8%A1%A8%E7%9A%84%E6%AF%94%E8%BE%83"><span class="nav-number">4.17.</span> <span class="nav-text">三种类型事实表的比较</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E6%97%B6%E5%88%86%E5%8C%BA"><span class="nav-number">4.18.</span> <span class="nav-text">实时分区</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%AE%9E%E7%B2%92%E5%BA%A6"><span class="nav-number">4.18.1.</span> <span class="nav-text">事实粒度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%91%A8%E6%9C%9F%E7%B2%92%E5%BA%A6"><span class="nav-number">4.18.2.</span> <span class="nav-text">周期粒度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B4%AF%E7%A7%AF%E5%BF%AB%E7%85%A7-2"><span class="nav-number">4.18.3.</span> <span class="nav-text">累积快照</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E7%BB%B4%E5%BB%BA%E6%A8%A1%E6%A1%88%E4%BE%8B%E4%B9%8B%E5%9B%9B%EF%BC%8C%E5%AE%A2%E6%88%B7%E5%85%B3%E7%B3%BB%E7%AE%A1%E7%90%86"><span class="nav-number">5.</span> <span class="nav-text">多维建模案例之四，客户关系管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E5%85%B3%E7%B3%BB%E7%AE%A1%E7%90%86%EF%BC%88CRM%EF%BC%89"><span class="nav-number">5.1.</span> <span class="nav-text">客户关系管理（CRM）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E6%95%B0%E6%8D%AE%E7%9A%84%E9%9B%86%E6%88%90"><span class="nav-number">5.2.</span> <span class="nav-text">客户数据的集成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E4%BF%A1%E6%81%AF%E7%9A%84%E5%88%86%E6%9E%90%E4%B8%8E%E6%8C%96%E6%8E%98"><span class="nav-number">5.3.</span> <span class="nav-text">客户信息的分析与挖掘</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E7%BB%B4%E5%BA%A6"><span class="nav-number">5.4.</span> <span class="nav-text">客户维度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A7%93%E5%90%8D%E4%B8%8E%E5%9C%B0%E5%9D%80%E7%9A%84%E8%A7%A3%E6%9E%90"><span class="nav-number">5.5.</span> <span class="nav-text">姓名与地址的解析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E7%BB%B4%E5%BA%A6%E7%A4%BA%E4%BE%8B"><span class="nav-number">5.6.</span> <span class="nav-text">客户维度示例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%87%E4%BA%8E%E4%B8%80%E8%88%AC%E7%9A%84%E5%AE%A2%E6%88%B7%E7%BB%B4%E5%BA%A6%E5%AE%9E%E4%BE%8B"><span class="nav-number">5.6.1.</span> <span class="nav-text">过于一般的客户维度实例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%85%B6%E4%BB%96%E5%AE%A2%E6%88%B7%E5%B1%9E%E6%80%A7-%E6%97%A5%E6%9C%9F"><span class="nav-number">5.6.2.</span> <span class="nav-text">常见的其他客户属性-日期</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E7%BB%B4%E5%BA%A6%E6%94%AF%E6%9E%B6"><span class="nav-number">5.6.3.</span> <span class="nav-text">日期维度支架</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%85%B6%E4%BB%96%E5%AE%A2%E6%88%B7%E5%B1%9E%E6%80%A7-%E5%AE%A2%E6%88%B7%E5%88%86%E7%B1%BB%E5%B1%9E%E6%80%A7"><span class="nav-number">5.6.4.</span> <span class="nav-text">常见的其他客户属性-客户分类属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%85%B6%E4%BB%96%E5%AE%A2%E6%88%B7%E5%B1%9E%E6%80%A7-%E8%81%9A%E9%9B%86%E4%BA%8B%E5%AE%9E%E5%B1%9E%E6%80%A7"><span class="nav-number">5.6.5.</span> <span class="nav-text">常见的其他客户属性-聚集事实属性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%8E%E5%9F%BA%E6%95%B0%E5%B1%9E%E6%80%A7%E9%9B%86%E7%9A%84%E7%BB%B4%E6%95%B0%E6%94%AF%E6%9E%B6"><span class="nav-number">5.7.</span> <span class="nav-text">低基数属性集的维数支架</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%A7%E5%9E%8B%E5%8F%98%E5%8C%96%E5%AE%A2%E6%88%B7%E7%BB%B4%E5%BA%A6%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%89"><span class="nav-number">5.8.</span> <span class="nav-text">大型变化客户维度（重要）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Recall%EF%BC%9A%E5%8E%86%E5%8F%B2%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="nav-number">5.8.1.</span> <span class="nav-text">Recall：历史完整性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B8%90%E5%8F%98%E7%BB%B4%E5%BA%A6"><span class="nav-number">5.8.2.</span> <span class="nav-text">渐变维度</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B-1%EF%BC%9A%E6%94%B9%E5%86%99%E5%B1%9E%E6%80%A7%E5%80%BC"><span class="nav-number">5.8.2.1.</span> <span class="nav-text">类型 1：改写属性值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B-2%EF%BC%9A%E6%B7%BB%E5%8A%A0%E7%BB%B4%E5%BA%A6%E8%A1%8C"><span class="nav-number">5.8.2.2.</span> <span class="nav-text">类型 2：添加维度行</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B-3%EF%BC%9A%E6%B7%BB%E5%8A%A0%E7%BB%B4%E5%BA%A6%E5%88%97"><span class="nav-number">5.8.2.3.</span> <span class="nav-text">类型 3：添加维度列</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B-6%EF%BC%882-3-1%EF%BC%89"><span class="nav-number">5.8.2.4.</span> <span class="nav-text">类型 6（2+3+1）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BF%AB%E5%8F%98%E7%BB%B4%E5%BA%A6"><span class="nav-number">5.8.3.</span> <span class="nav-text">快变维度</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BF%AB%E5%8F%98%E7%BB%B4%E5%BA%A6%E7%9A%84%E5%A4%84%E7%90%86%E5%8A%9E%E6%B3%95"><span class="nav-number">5.8.3.1.</span> <span class="nav-text">快变维度的处理办法</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%BE%AE%E5%9E%8B%E7%BB%B4%E5%BA%A6"><span class="nav-number">5.8.3.1.1.</span> <span class="nav-text">微型维度</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E9%A2%84%E8%AE%BE%E6%B3%A2%E6%AE%B5"><span class="nav-number">5.8.3.1.2.</span> <span class="nav-text">预设波段</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BA%BA%E5%8F%A3%E5%BE%AE%E5%9E%8B%E7%BB%B4%E5%BA%A6%E7%9A%84%E6%A0%B7%E6%9C%AC%E8%A1%8C-%E5%BE%AE%E5%9E%8B%E7%BB%B4%E5%BA%A6"><span class="nav-number">5.8.3.2.</span> <span class="nav-text">人口微型维度的样本行-微型维度</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BA%BA%E5%8F%A3%E5%BE%AE%E5%9E%8B%E7%BB%B4%E5%BA%A6%E7%9A%84%E6%A0%B7%E6%9C%AC%E8%A1%8C-%E9%A2%84%E8%AE%BE%E6%B3%A2%E6%AE%B5"><span class="nav-number">5.8.3.3.</span> <span class="nav-text">人口微型维度的样本行-预设波段</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%95%86%E5%8A%A1%E5%AE%A2%E6%88%B7%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="nav-number">5.9.</span> <span class="nav-text">商务客户体系结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%B1%E5%BA%A6%E5%8F%AF%E5%8F%98%E4%BD%93%E7%B3%BB%E5%AE%A2%E6%88%B7%E7%BB%B4%E5%BA%A6"><span class="nav-number">5.9.1.</span> <span class="nav-text">深度可变体系客户维度</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A1%A5%E6%8E%A5%E8%A1%A8-%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B"><span class="nav-number">5.9.1.1.</span> <span class="nav-text">桥接表 - 自顶向下</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A1%A5%E6%8E%A5%E8%A1%A8-%E8%87%AA%E4%B8%8B%E8%80%8C%E4%B8%8A"><span class="nav-number">5.9.1.2.</span> <span class="nav-text">桥接表 - 自下而上</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%93%E7%B3%BB%E6%A1%A5%E6%8E%A5%E8%BF%9E%E8%A1%A8%E6%A0%B7%E6%9C%AC%E8%A1%8C"><span class="nav-number">5.9.2.</span> <span class="nav-text">体系桥接连表样本行</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="EagleBear2002"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">EagleBear2002</p>
  <div class="site-description" itemprop="description">暮雪朝霜，毋改英雄意气</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">483</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">61</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/EagleBear2002" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;EagleBear2002" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:eaglebear2002@foxmail.com" title="E-Mail → mailto:eaglebear2002@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://czxingchen.github.io/" title="https:&#x2F;&#x2F;czxingchen.github.io&#x2F;" rel="noopener" target="_blank">PL 顶会研究者-XiaoZhi</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.cnblogs.com/the-sword-of-king/" title="https:&#x2F;&#x2F;www.cnblogs.com&#x2F;the-sword-of-king&#x2F;" rel="noopener" target="_blank">模式识别专家-崖山剑</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://en.ydjsir.com.cn/" title="https:&#x2F;&#x2F;en.ydjsir.com.cn&#x2F;" rel="noopener" target="_blank">愿逐月华流照君-YDJSIR</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.csdn.net/m0_51691879?spm=1000.2115.3001.5343" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;m0_51691879?spm&#x3D;1000.2115.3001.5343" rel="noopener" target="_blank">软院科协掌门人-wbl_z</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://itxia.club/" title="https:&#x2F;&#x2F;itxia.club&#x2F;" rel="noopener" target="_blank">侠之大者为国为民-IT 侠</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://chestnutsilver.github.io/TJIS-My-Helloworld/" title="https:&#x2F;&#x2F;chestnutsilver.github.io&#x2F;TJIS-My-Helloworld&#x2F;" rel="noopener" target="_blank">因果推断爱好者-ChestnutSilver</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://atritium.github.io/" title="https:&#x2F;&#x2F;atritium.github.io&#x2F;" rel="noopener" target="_blank">任天堂技术扛把子-manqi</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.sakiyary.cn/" title="https:&#x2F;&#x2F;blog.sakiyary.cn&#x2F;" rel="noopener" target="_blank">教育部教学创新项目负责人-哈气鸭梨</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://huoxj.github.io/" title="https:&#x2F;&#x2F;huoxj.github.io&#x2F;" rel="noopener" target="_blank">离百年博客还有 98 年捞程序 Runz</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.erinwithbmq.xin/" title="https:&#x2F;&#x2F;www.erinwithbmq.xin&#x2F;" rel="noopener" target="_blank">摸鱼小能手 ErinwithBMQ の 尋夢之旅</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://tilnel.github.io/" title="https:&#x2F;&#x2F;tilnel.github.io&#x2F;" rel="noopener" target="_blank">南大耐摔王 Tilnel 的杂谈小屋</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.azifan.club/" title="https:&#x2F;&#x2F;blog.azifan.club&#x2F;" rel="noopener" target="_blank">水龙之魂</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://mzy0624.github.io/" title="https:&#x2F;&#x2F;mzy0624.github.io&#x2F;" rel="noopener" target="_blank">Haibara AI</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2022 – 
  <span itemprop="copyrightYear">2026</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">EagleBear2002</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">2.7m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">40:25</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  



  <script>
  if (CONFIG.page.isPost) {
    wpac_init = window.wpac_init || [];
    wpac_init.push({
      widget: 'Rating',
      id    : ,
      el    : 'wpac-rating',
      color : 'fc6423'
    });
    (function() {
      if ('WIDGETPACK_LOADED' in window) return;
      WIDGETPACK_LOADED = true;
      var mc = document.createElement('script');
      mc.type = 'text/javascript';
      mc.async = true;
      mc.src = '//embed.widgetpack.com/widget.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
    })();
  }
  </script>










<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
