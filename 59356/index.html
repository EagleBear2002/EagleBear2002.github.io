<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 8.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.jpg">
  <link rel="mask-icon" href="/images/avatar.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-big-counter.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"eaglebear2002.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":400,"display":"always","padding":18,"offset":12,"onmobile":true,"scroll_to_top_on_sidebar_toggle":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Web 与 HTTP Web 页面由对象组成 对象可以是 HTML 文件、JPEG 图像、音频文件... Web 页面由基本 html 文件组成，其中包含几个引用对象每个对象都可以通过 URL 寻址 示例 URL（统一资源定位器）">
<meta property="og:type" content="article">
<meta property="og:title" content="Web 前端开发-12-HTTP 协议">
<meta property="og:url" content="https://eaglebear2002.github.io/59356/index.html">
<meta property="og:site_name" content="EagleBear2002 的博客">
<meta property="og:description" content="Web 与 HTTP Web 页面由对象组成 对象可以是 HTML 文件、JPEG 图像、音频文件... Web 页面由基本 html 文件组成，其中包含几个引用对象每个对象都可以通过 URL 寻址 示例 URL（统一资源定位器）">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130115957111.png">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130120049589.png">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130120109018.png">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/12-HTTP%20%E5%8D%8F%E8%AE%AE%20-%20%E5%89%AF%E6%9C%AC.jpg">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/12-HTTP%20%E5%8D%8F%E8%AE%AE%20-%20%E5%89%AF%E6%9C%AC-1675051427612-3.jpg">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130120355917.png">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/12-HTTP%20%E5%8D%8F%E8%AE%AE%20-%20%E5%89%AF%E6%9C%AC-1675051462804-5.jpg">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/12-HTTP%20%E5%8D%8F%E8%AE%AE%20-%20%E5%89%AF%E6%9C%AC-1675051498425-7.jpg">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130120719048.png">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130120727035.png">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130120739077.png">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/12-HTTP%20%E5%8D%8F%E8%AE%AE%20-%20%E5%89%AF%E6%9C%AC-1675052431633-9.jpg">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130122220486.png">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130124054502.png">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130124102464.png">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130124113165.png">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130124117576.png">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130124235127.png">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130124315947.png">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130124419593.png">
<meta property="og:image" content="https://eaglebear2002.github.io/59356/image-20230130124435169.png">
<meta property="article:published_time" content="2023-01-30T02:10:00.000Z">
<meta property="article:modified_time" content="2026-02-09T05:08:29.507Z">
<meta property="article:author" content="EagleBear2002">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://eaglebear2002.github.io/59356/image-20230130115957111.png">

<link rel="canonical" href="https://eaglebear2002.github.io/59356/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Web 前端开发-12-HTTP 协议 | EagleBear2002 的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<script>
  hljs.initLineNumbersOnLoad();
</script>
<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">EagleBear2002 的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">这里必须根绝一切犹豫，这里任何怯懦都无济于事</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">61</span></a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">3</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">483</span></a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/eaglebear2002" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://eaglebear2002.github.io/59356/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="EagleBear2002">
      <meta itemprop="description" content="暮雪朝霜，毋改英雄意气">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EagleBear2002 的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Web 前端开发-12-HTTP 协议
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-30 10:10:00" itemprop="dateCreated datePublished" datetime="2023-01-30T10:10:00+08:00">2023-01-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2026-02-09 13:08:29" itemprop="dateModified" datetime="2026-02-09T13:08:29+08:00">2026-02-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%AD%A6%E9%99%A2%E6%9C%AC%E7%A7%91%E8%AF%BE%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">南京大学软件学院本科课程</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%AD%A6%E9%99%A2%E6%9C%AC%E7%A7%91%E8%AF%BE%E7%A8%8B/2022Fall-Web-%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">2022Fall-Web 前端开发</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>14k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>12 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Web-与-HTTP">Web 与 HTTP</h2>
<p>Web 页面由对象组成</p>
<p>对象可以是 HTML 文件、JPEG 图像、音频文件...</p>
<p>Web 页面由基本 html 文件组成，其中包含几个引用对象每个对象都可以通过 URL 寻址</p>
<p>示例 URL（统一资源定位器）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">www.someschool.edu/someDept/pic.gif |---host name----||---path name---|<br></code></pre></td></tr></table></figure>
<h2 id="HTTP-总览">HTTP 总览</h2>
<p>HTTP：超文本传输协议</p>
<p>Web 的应用层协议</p>
<p>客户机/服务器模型</p>
<ul>
<li>客户端:请求、接收、显示 Web 对象的浏览器</li>
<li>服务器：Web 服务器发送对象以响应请求</li>
</ul>
<p>使用 TCP：</p>
<ol>
<li>客户端启动 TCP 连接（创建套接字）到服务器，端口 80</li>
<li>服务器接受来自客户端的 TCP 连接</li>
<li>浏览器（HTTP 客户端）和 Web 服务器（HTTP 服务器）之间交换 HTTP 消息（应用层协议消息）</li>
<li>TCP 连接关闭</li>
</ol>
<blockquote>
<p>HTTP 是无状态的。</p>
<p>服务器不维护关于过去客户端请求的信息</p>
<p>维护“状态”的协议非常复杂！</p>
<ul>
<li>必须保留过去的历史（状态）</li>
<li>如果服务器/客户端崩溃，它们的“状态”视图可能不一致，必须进行协调</li>
</ul>
</blockquote>
<h2 id="RFC-的定义">RFC 的定义</h2>
<blockquote>
<p>The Hypertext Transfer Protocol (HTTP) is an application-level protocol for distributed, collaborative, hypermedia information systems. It is a generic, stateless, protocol which can be used for many tasks beyond its use for hypertext, such as name servers and distributed object management systems, through extension of its request methods, error codes and headers . A feature of HTTP is the typing and negotiation of data representation, allowing systems to be built independently of the data being transferred.</p>
</blockquote>
<p>超文本传输协议（HTTP）是一种为分布式，协作式的，超媒体信息系统。它是一种通用的，无状态（stateless）的协议，除了应用于超文本传输外，它也可以应用于诸如名称服务器和分布对象管理系统之类的系统，这可以通过扩展它的请求方法，错误代码和消息头来实现。HTTP 的一个特性就是是数据表现形式是可以定义的和可协商性的，这就允许系统能独立于于数据传输被构建。</p>
<p><a target="_blank" rel="noopener" href="https://www.w3.org/Protocols/rfc2616/rfc2616.html">https://www.w3.org/Protocols/rfc2616/rfc2616.html</a></p>
<h2 id="HTTP-历史">HTTP 历史</h2>
<ul>
<li>HTTP Version 0.9</li>
<li>HTTP 1.0: RFC 1945</li>
<li>HTTP 1.1: RFC 2616</li>
<li>HTTPS (HTTP over TLS, HTTP over SSL, HTTP Secure）</li>
<li>2009 Google 设计了基于 TCP 的 SPDY</li>
<li>HTTP/2 (originally named HTTP/2.0)
<ul>
<li>Hypertext Transfer Protocol version 2 - RFC7540 /9113</li>
<li>HPACK - Header Compression for HTTP/2 - RFC7541</li>
</ul>
</li>
<li>HTTP/3：RFC9114
<ul>
<li>QUIC（Quick UDP Internet Connections, 快速 UDP 网络连接）</li>
</ul>
</li>
</ul>
<h3 id="HTTP-协议的演进">HTTP 协议的演进</h3>
<ul>
<li>HTTP over QUIC</li>
<li>UDP</li>
</ul>
<p><img src="/59356/image-20230130115957111.png" alt></p>
<h3 id="HTTP-2">HTTP/2</h3>
<p>HTTP/2 是 HTTP 网络协议的一个重要版本。HTTP / 2 的主要目标是通过启用完整的请求和响应多路复用来减少延迟，通过有效压缩 HTTP 标头字段来最小化协议开销，并增加对请求优先级和服务器推送的支持。</p>
<p>HTTP/2 不会修改 HTTP 协议的语义。HTTP 1.1 中的所有核心概念（例如 HTTP 方法，状态码，URI 和 headers）都得以保留。而是修改了 HTTP/2 数据在客户端和服务器之间的格式（帧）和传输方式，这两者都管理整个过程，并在新的框架层内隐藏了应用程序的复杂性。所以，所有现有的应用程序都可以不经修改地交付。</p>
<h2 id="请求-响应">请求-响应</h2>
<p>HTTP 的结构很简单：</p>
<ul>
<li>客户端发送请求</li>
<li>服务器返回一个响应</li>
</ul>
<p>HTTP 可以在单个 TCP 连接上支持多个请求-应答交换</p>
<h3 id="HTTP-客户端和服务器端使用-TCP-套接字接口进行通信">HTTP 客户端和服务器端使用 TCP 套接字接口进行通信</h3>
<p><img src="/59356/image-20230130120049589.png" alt></p>
<h3 id="HTTP-事务延迟">HTTP 事务延迟</h3>
<p><img src="/59356/image-20230130120109018.png" alt></p>
<h3 id="影响-HTTP-的常见的与-tcp-相关的延迟">影响 HTTP 的常见的与 tcp 相关的延迟</h3>
<ol>
<li>TCP 连接建立（三次握手）</li>
<li>TCP 慢启动拥塞控制</li>
<li>Nagle 的数据聚合算法</li>
<li>TCP 用于承载确认的延迟确认算法</li>
<li>TIME_WAIT 延迟和端口耗尽</li>
</ol>
<h2 id="HTTP-1-x-的连接管理">HTTP/1.x 的连接管理</h2>
<p><img src="/59356/12-HTTP%20%E5%8D%8F%E8%AE%AE%20-%20%E5%89%AF%E6%9C%AC.jpg" alt></p>
<h3 id="短连接">短连接</h3>
<p>每一个 HTTP 请求都由它自己独立的连接完成；这意味着发起每一个 HTTP 请求之前都会有一次 TCP 握手，而且是连续不断的。</p>
<p>这是 HTTP/1.0 的默认模型（如果没有指定 Connection 协议头，或者是值被设置为 close）。而在 HTTP/1.1 中，只有当 Connection 被设置为 close 时才会用到这个模型。</p>
<p>短连接有两个比较大的问题：创建新连接耗费的时间尤为明显，另外 TCP 连接的性能只有在该连接被使用一段时间后（热连接）才能得到改善。</p>
<h3 id="长连接-持久连接">长连接/持久连接</h3>
<p>一个长连接会保持一段时间，重复用于发送一系列请求，节省了新建 TCP 连接握手的时间，还可以利用 TCP 的性能增强能力。当然这个连接也不会一直保留着：连接在空闲一段时间后会被关闭（服务器可以使用 Keep-Alive 协议头来指定一个最小的连接保持时间）。</p>
<p>长连接也还是有缺点的；就算是在空闲状态，它还是会消耗服务器资源，而且在重负载时，还有可能遭受 DoS attacks 攻击。这种场景下，可以使用非长连接，即尽快关闭那些空闲的连接，也能对性能有所提升。</p>
<p>HTTP/1.0 里默认并不使用长连接。把 Connection 设置成 close 以外的其它参数都可以让其保持长连接，通常会设置为 retry-after。</p>
<p>在 HTTP/1.1 里，默认就是长连接的，协议头都不用再去声明它（但我们还是会把它加上，万一某个时候因为某种原因要退回到 HTTP/1.0 呢）。</p>
<h3 id="HTTP-流水线">HTTP 流水线</h3>
<p>默认情况下，HTTP 请求是按顺序发出的。下一个请求只有在当前请求收到应答过后才会被发出。由于会受到网络延迟和带宽的限制，在下一个请求被发送到服务器之前，可能需要等待很长时间。</p>
<p>流水线是在同一条长连接上发出连续的请求，而不用等待应答返回。这样可以避免连接延迟。理论上讲，性能还会因为两个 HTTP 请求有可能被打包到一个 TCP 消息包中而得到提升。就算 HTTP 请求不断的继续，尺寸会增加，但设置 TCP 的 MSS(Maximum Segment Size) 选项，仍然足够包含一系列简单的请求。</p>
<p>并不是所有类型的 HTTP 请求都能用到流水线：只有 idempotent 方式，比如 GET、HEAD、PUT 和 DELETE 能够被安全的重试：如果有故障发生时，流水线的内容要能被轻易的重试。</p>
<p>今天，所有遵循 HTTP/1.1 的代理和服务器都应该支持流水线，虽然实际情况中还是有很多限制：一个很重要的原因是，目前没有现代浏览器默认启用这个特性。</p>
<h2 id="域名分片">域名分片</h2>
<p>如果服务器端想要更快速的响应网站或应用程序的应答，它可以迫使客户端建立更多的连接。例如，不要在同一个域名下获取所有资源，假设有个域名是 <code>ww.example.com</code>，我们可以把它拆分成好几个域名：<code>www1.example.com</code>、<code>www2.example.com</code>、<code>www3.example.com</code>。所有这些域名都指向同一台服务器，浏览器会同时为每个域名建立 6 条连接（在我们这个例子中，连接数会达到 18 条）。这一技术被称作域名分片。</p>
<p>备注： 除非你有紧急而迫切的需求，不要使用这一过时的技术，升级到 HTTP/2 就好了。</p>
<p><img src="/59356/12-HTTP%20%E5%8D%8F%E8%AE%AE%20-%20%E5%89%AF%E6%9C%AC-1675051427612-3.jpg" alt></p>
<h2 id="HTTP-事务">HTTP 事务</h2>
<p><img src="/59356/image-20230130120355917.png" alt></p>
<h2 id="HTTP-消息">HTTP 消息</h2>
<p>HTTP 消息是服务器和客户端之间交换数据的方式。</p>
<p>HTTP 消息由采用 ASCII 编码的多行文本构成。</p>
<p>有两种类型的消息：</p>
<ul>
<li>请求（requests）-- 由客户端发送用来触发一个服务器上的动作；</li>
<li>响应（responses）-- 来自服务器的应答。</li>
</ul>
<p><img src="/59356/12-HTTP%20%E5%8D%8F%E8%AE%AE%20-%20%E5%89%AF%E6%9C%AC-1675051462804-5.jpg" alt></p>
<h3 id="消息组成">消息组成</h3>
<p>HTTP 请求和响应具有相似的结构，由以下部分组成：</p>
<ol>
<li>一行起始行用于描述要执行的请求，或者是对应的状态，成功或失败。这个起始行总是单行的。</li>
<li>一个可选的 HTTP 头集合指明请求或描述消息正文。</li>
<li>一个空行指示所有关于请求的元数据已经发送完毕。</li>
<li>一个可选的包含请求相关数据的正文（比如 HTML 表单内容）, 或者响应相关的文档。正文的大小有起始行的 HTTP 头来指定。</li>
</ol>
<p>起始行和 HTTP 消息中的 HTTP 头统称为请求头，而其有效负载被称为消息正文。</p>
<p><img src="/59356/12-HTTP%20%E5%8D%8F%E8%AE%AE%20-%20%E5%89%AF%E6%9C%AC-1675051498425-7.jpg" alt></p>
<h3 id="HTTP-请求消息">HTTP 请求消息</h3>
<p>HTTP 请求消息:</p>
<ul>
<li>ASCII</li>
<li>行以 CRLF &quot;\r\n&quot; 结尾</li>
<li>第一行叫做“请求行”</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html">GET /somedir/page.html HTTP/1.1 // 请求行 (GET, POST, HEAD方法) Host:<br>www.someschool.edu ---- User-agent: Mozilla/4.0 | Connection: close |-头域<br>Accept-language:fr ---- (extra carriage return, line feed) //<br>回车，换行表示消息的结束<br></code></pre></td></tr></table></figure>
<h4 id="请求方法">请求方法</h4>
<ul>
<li>GET ：从服务器获取 URL 对应的资源</li>
<li>HEAD ：除了服务器响应中不能包含消息体，该方法与 GET 一样。用于只需少数元信息的情况</li>
<li>POST ：被设计用来注解、修改 URL 所对应的资源</li>
<li>PUT ：被设计用来修改或创建资源。当 URL 对应的资源存在时，则提交的作为新版本，否则新建资源</li>
<li>DELETE ：被设计用来删除 URL 对应的资源</li>
<li>TRACE ：主要用来测试。服务器将最终接收到的请求本身发送回来，作为客户端诊断依据</li>
<li>OPTIONS ：客户端查询服务器对与某 URL 允许的通信选项</li>
<li>CONNECT ：保留的方法名，用于代理切换隧道</li>
<li>支持扩展</li>
</ul>
<h5 id="GET-方法示例">GET 方法示例</h5>
<p><img src="/59356/image-20230130120719048.png" alt></p>
<h5 id="POST-方法示例">POST 方法示例</h5>
<p><img src="/59356/image-20230130120727035.png" alt></p>
<h5 id="TRACE-示例">TRACE 示例</h5>
<p><img src="/59356/image-20230130120739077.png" alt></p>
<h4 id="头域">头域</h4>
<p>由主键/值对组成，描述客户端或者服务器的属性、被传输的资源以及应该实现连接。</p>
<p>四种不同类型的头标：</p>
<ol>
<li>通用头标：即可用于请求，也可用于响应，是作为一个整体而不是特定资源与事务相关联。</li>
<li>请求头标：允许客户端传递关于自身的信息和希望的响应形式。</li>
<li>响应头标：服务器和于传递自身信息的响应。</li>
<li>实体头标：定义被传送资源的信息。即可用于请求，也可用于响应。</li>
</ol>
<h4 id="实例">实例</h4>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html">Accept: text/html Host: www.nju.edu.cn From: abc@nju.edu.cn User-Agent:<br>Mozilla/4.0<br></code></pre></td></tr></table></figure>
<h3 id="HTTP-响应消息">HTTP 响应消息</h3>
<ul>
<li>ASCII 状态行</li>
<li>头域</li>
<li>内容</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html">HTTP/1.1 200 OK // status line (protocol status code status phrase) Connection:<br>close ---- Date: Thu, 06 Aug 1998 | 12:00:15 GMT | Server: Apache/1.3.0 (Unix)<br>|-header lines Last-Modified: Mon, 22 Jun | 1998 … | Content-Length: 6821 |<br>Content-Type: text/html ---- data data data data data ... // data, e.g.,<br>requested HTML file<br></code></pre></td></tr></table></figure>
<h3 id="响应状态行">响应状态行</h3>
<ul>
<li>HTTP-Version：http 协议版本</li>
<li>Status-Code：状态码（三位数字）</li>
<li>Reason-Phrase：状态描述</li>
</ul>
<h3 id="状态码">状态码</h3>
<p>HTTP 响应状态码用来表明特定 HTTP 请求是否成功完成。响应被归为以下五大类：</p>
<ol>
<li>信息响应 (100-199)</li>
<li>成功响应 (200-299)</li>
<li>重定向消息 (300-399)</li>
<li>客户端错误响应 (400-499)</li>
<li>服务端错误响应 (500-599)</li>
</ol>
<h3 id="常用状态码">常用状态码</h3>
<table>
<thead>
<tr>
<th>状态码</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
<tr>
<td>301</td>
<td>Moved Permanently</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
</tr>
<tr>
<td>403</td>
<td>forbidden</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
</tr>
</tbody>
</table>
<h3 id="信息响应">信息响应</h3>
<table>
<thead>
<tr>
<th>状态码</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>100 Continue</td>
<td>这个临时响应表明，迄今为止的所有内容都是可行的，客户端应该继续请求，如果已经完成，则忽略它。</td>
</tr>
<tr>
<td>101 Switching Protocols</td>
<td>该代码是响应客户端的 Upgrade (en-US) 请求头发送的，指明服务器即将切换的协议。</td>
</tr>
<tr>
<td>102 Processing (WebDAV)</td>
<td>此代码表示服务器已收到并正在处理该请求，但当前没有响应可用。</td>
</tr>
<tr>
<td>103 Early Hints</td>
<td>此状态代码主要用于与 Link 链接头一起使用，以允许用户代理在服务器准备响应阶段时开始预加载 preloading 资源。</td>
</tr>
</tbody>
</table>
<h3 id="成功响应">成功响应</h3>
<table>
<thead>
<tr>
<th>状态码</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>200 OK</td>
<td>请求成功。</td>
</tr>
<tr>
<td>201 Created</td>
<td>该请求已成功，并因此创建了一个新的资源。这通常是在 POST 请求，或是某些 PUT 请求之后返回的响应。</td>
</tr>
<tr>
<td>202 Accepted</td>
<td>请求已经接收到，但还未响应，没有结果。意味着不会有一个异步的响应去表明当前请求的结果，预期另外的进程和服务去处理请求，或者批处理。</td>
</tr>
<tr>
<td>203 Non-Authoritative Information</td>
<td>服务器已成功处理了请求，但返回的实体头部元信息不是在原始服务器上有效的确定集合，而是来自本地或者第三方的拷贝。当前的信息可能是原始版本的子集或者超集。例如，包含资源的元数据可能导致原始服务器知道元信息的超集。使用此状态码不是必须的，而且只有在响应不使用此状态码便会返回 200 OK 的情况下才是合适的。</td>
</tr>
<tr>
<td>204 No Content</td>
<td>对于该请求没有的内容可发送，但头部字段可能有用。用户代理可能会用此时请求头部信息来更新原来资源的头部缓存字段。</td>
</tr>
<tr>
<td>205 Reset Content</td>
<td>告诉用户代理重置发送此请求的文档。</td>
</tr>
<tr>
<td>206 Partial Content</td>
<td>当从客户端发送 Range 范围标头以只请求资源的一部分时，将使用此响应代码。</td>
</tr>
<tr>
<td>207 Multi-Status (WebDAV)</td>
<td>对于多个状态代码都可能合适的情况，传输有关多个资源的信息。</td>
</tr>
<tr>
<td>208 Already Reported (WebDAV)</td>
<td>在 DAV 里面使用 <a href="dav:propstat">dav:propstat</a> 响应元素以避免重复枚举多个绑定的内部成员到同一个集合。</td>
</tr>
<tr>
<td>226 IM Used (HTTP Delta encoding)</td>
<td>服务器已经完成了对资源的 GET 请求，并且响应是对当前实例应用的一个或多个实例操作结果的表示。</td>
</tr>
</tbody>
</table>
<h3 id="重定向消息">重定向消息</h3>
<table>
<thead>
<tr>
<th>状态码</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>300 Multiple Choice</td>
<td>请求拥有多个可能的响应。用户代理或者用户应当从中选择一个。</td>
</tr>
<tr>
<td>301 Moved Permanently</td>
<td>请求资源的 URL 已永久更改。在响应中给出了新的 URL。</td>
</tr>
<tr>
<td>302 Found</td>
<td>此响应代码表示所请求资源的 URI 已暂时更改。未来可能会对 URI 进行进一步的改变。因此，客户机应该在将来的请求中使用这个相同的 URI。</td>
</tr>
<tr>
<td>303 See Other</td>
<td>服务器发送此响应，以指示客户端通过一个 GET 请求在另一个 URI 中获取所请求的资源。</td>
</tr>
<tr>
<td>304 Not Modified</td>
<td>这是用于缓存的目的。它告诉客户端响应还没有被修改，因此客户端可以继续使用相同的缓存版本的响应。</td>
</tr>
<tr>
<td>305 Use Proxy 已弃用</td>
<td>在 HTTP 规范中定义，以指示请求的响应必须被代理访问。由于对代理的带内配置的安全考虑，它已被弃用。</td>
</tr>
<tr>
<td>306 unused</td>
<td>此响应代码不再使用；它只是保留。它曾在 HTTP/1.1 规范的早期版本中使用过。</td>
</tr>
<tr>
<td>307 Temporary Redirect</td>
<td>服务器发送此响应，以指示客户端使用在前一个请求中使用的相同方法在另一个 URI 上获取所请求的资源。这与 302 Found HTTP 响应代码具有相同的语义，但用户代理不能更改所使用的 HTTP 方法：如果在第一个请求中使用了 POST，则在第二个请求中必须使用 POST</td>
</tr>
<tr>
<td>308 Permanent Redirect</td>
<td>这意味着资源现在永久位于由 Location: HTTP Response 标头指定的另一个 URI。这与 301 Moved Permanently HTTP 响应代码具有相同的语义，但用户代理不能更改所使用的 HTTP 方法：如果在第一个请求中使用 POST，则必须在第二个请求中使用 POST。</td>
</tr>
</tbody>
</table>
<h4 id="301-永久重定向">301-永久重定向</h4>
<p>什么情况下使用 301 重定向：</p>
<ul>
<li>迁移到另外一个域名时，通过 301 永久重定向将旧域名重定向至新域名，挽回流量损失和 SEO。</li>
<li>保持链接有效：当重构 Web 站点的时候，资源的 URL 会发生改变。你并不想因此而使旧链接失效，因为它们会带来宝贵的用户（并且帮助优化你的 SEO），所以需要建立从旧链接到新链接的重定向映射。</li>
<li>如果有多个闲置域名需要指向同一网站时，通过 301 永久重定向可以实现。</li>
<li>打算实现网址规范化</li>
<li>强制使用 HTTPS 协议。对于 HTTP 版本站点的请求会被重定向至采用了 HTTPS 协议的版本。</li>
</ul>
<p><img src="/59356/12-HTTP%20%E5%8D%8F%E8%AE%AE%20-%20%E5%89%AF%E6%9C%AC-1675052431633-9.jpg" alt></p>
<h4 id="临时重定向">临时重定向</h4>
<p>有时候请求的资源无法从其标准地址访问，但是却可以从另外的地方访问。在这种情况下可以使用临时重定向。</p>
<p>搜索引擎不会记录该新的、临时的链接。在创建、更新或者删除资源的时候，临时重定向也可以用于显示临时性的进度页面。</p>
<table>
<thead>
<tr>
<th>编码</th>
<th>含义</th>
<th>处理方法</th>
<th>典型应用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>302</td>
<td>Found</td>
<td>GET 方法不会发生变更，其他方法有可能会变更为 GET 方法。</td>
<td>由于不可预见的原因该页面暂不可用。在这种情况下，搜索引擎不会更新它们的链接。</td>
</tr>
<tr>
<td>303</td>
<td>See Other</td>
<td>GET 方法不会发生变更，其他方法会变更为 GET 方法（消息主体会丢失）。</td>
<td>用于 PUT 或 POST 请求完成之后进行页面跳转来防止由于页面刷新导致的操作的重复触发。</td>
</tr>
<tr>
<td>307</td>
<td>Temporary Redirect</td>
<td>方法和消息主体都不发生变化。</td>
<td>由于不可预见的原因该页面暂不可用。在这种情况下，搜索引擎不会更新它们的链接。当站点支持非 GET 方法的链接或操作的时候，该状态码优于 302 状态码。</td>
</tr>
</tbody>
</table>
<h4 id="特殊重定向">特殊重定向</h4>
<p><img src="/59356/image-20230130122220486.png" alt></p>
<h3 id="客户端错误响应">客户端错误响应</h3>
<table>
<thead>
<tr>
<th>状态码</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>400 Bad Request</td>
<td>由于被认为是客户端错误（例如，错误的请求语法、无效的请求消息帧或欺骗性的请求路由），服务器无法或不会处理请求。</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>虽然 HTTP 标准指定了 <code>&quot;unauthorized&quot;</code>，但从语义上来说，这个响应意味着 <code>&quot;unauthenticated&quot;</code>。也就是说，客户端必须对自身进行身份验证才能获得请求的响应。</td>
</tr>
<tr>
<td>402 Payment Required</td>
<td>实验性<br>此响应代码保留供将来使用。创建此代码的最初目的是将其用于数字支付系统，但是此状态代码很少使用，并且不存在标准约定。</td>
</tr>
<tr>
<td>403 Forbidden</td>
<td>客户端没有访问内容的权限；也就是说，它是未经授权的，因此服务器拒绝提供请求的资源。与 401 Unauthorized 不同，服务器知道客户端的身份。</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>服务器找不到请求的资源。在浏览器中，这意味着无法识别 URL。在 API 中，这也可能意味着端点有效，但资源本身不存在。服务器也可以发送此响应，而不是 403 Forbidden，以向未经授权的客户端隐藏资源的存在。这个响应代码可能是最广为人知的，因为它经常出现在网络上。</td>
</tr>
<tr>
<td>405 Method Not Allowed</td>
<td>服务器知道请求方法，但目标资源不支持该方法。例如，API 可能不允许调用 DELETE 来删除资源。</td>
</tr>
<tr>
<td>406 Not Acceptable</td>
<td>当 web 服务器在执行服务端驱动型内容协商机制后，没有发现任何符合用户代理给定标准的内容时，就会发送此响应。</td>
</tr>
<tr>
<td>407 Proxy Authentication Required</td>
<td>类似于 401 Unauthorized 但是认证需要由代理完成。</td>
</tr>
<tr>
<td>408 Request Timeout</td>
<td>此响应由一些服务器在空闲连接上发送，即使客户端之前没有任何请求。这意味着服务器想关闭这个未使用的连接。由于一些浏览器，如 Chrome、Firefox 27+ 或 IE9，使用 HTTP 预连接机制来加速冲浪，所以这种响应被使用得更多。还要注意的是，有些服务器只是关闭了连接而没有发送此消息。</td>
</tr>
<tr>
<td>409 Conflict</td>
<td>当请求与服务器的当前状态冲突时，将发送此响应。</td>
</tr>
<tr>
<td>410 Gone</td>
<td>当请求的内容已从服务器中永久删除且没有转发地址时，将发送此响应。客户端需要删除缓存和指向资源的链接。HTTP 规范打算将此状态代码用于“有限时间的促销服务”。API 不应被迫指出已使用此状态代码删除的资源。</td>
</tr>
<tr>
<td>411 Length Required</td>
<td>服务端拒绝该请求因为 Content-Length 头部字段未定义但是服务端需要它。</td>
</tr>
<tr>
<td>412 Precondition Failed</td>
<td>客户端在其头文件中指出了服务器不满足的先决条件。</td>
</tr>
<tr>
<td>413 Payload Too Large</td>
<td>请求实体大于服务器定义的限制。服务器可能会关闭连接，或在标头字段后返回重试 Retry-After。</td>
</tr>
<tr>
<td>414 URI Too Long</td>
<td>客户端请求的 URI 比服务器愿意接收的长度长。</td>
</tr>
<tr>
<td>415 Unsupported Media Type</td>
<td>服务器不支持请求数据的媒体格式，因此服务器拒绝请求。</td>
</tr>
<tr>
<td>416 Range Not Satisfiable</td>
<td>无法满足请求中 Range 标头字段指定的范围。该范围可能超出了目标 URI 数据的大小。</td>
</tr>
<tr>
<td>417 Expectation Failed</td>
<td>此响应代码表示服务器无法满足 Expect 请求标头字段所指示的期望。</td>
</tr>
<tr>
<td>418 I'm a teapot</td>
<td>服务端拒绝用茶壶煮咖啡。笑话，典故来源茶壶冲泡咖啡</td>
</tr>
<tr>
<td>421 Misdirected Request</td>
<td>请求被定向到无法生成响应的服务器。这可以由未配置为针对请求 URI 中包含的方案和权限组合生成响应的服务器发送。</td>
</tr>
<tr>
<td>422 Unprocessable Entity (WebDAV)</td>
<td>请求格式正确，但由于语义错误而无法遵循。</td>
</tr>
<tr>
<td>423 Locked (WebDAV)</td>
<td>正在访问的资源已锁定。</td>
</tr>
<tr>
<td>424 Failed Dependency (WebDAV)</td>
<td>由于前一个请求失败，请求失败。</td>
</tr>
<tr>
<td>425 Too Early</td>
<td>实验性<br>表示服务器不愿意冒险处理可能被重播的请求。</td>
</tr>
<tr>
<td>426 Upgrade Required</td>
<td>服务器拒绝使用当前协议执行请求，但在客户端升级到其他协议后可能愿意这样做。 服务端发送带有 Upgrade (en-US) 字段的 426 响应来表明它所需的协议（们）。</td>
</tr>
<tr>
<td>428 Precondition Required</td>
<td>源服务器要求请求是有条件的。此响应旨在防止'丢失更新'问题，即当第三方修改服务器上的状态时，客户端 GET 获取资源的状态，对其进行修改并将其 PUT 放回服务器，从而导致冲突。</td>
</tr>
<tr>
<td>429 Too Many Requests</td>
<td>用户在给定的时间内发送了太多请求（“限制请求速率”）</td>
</tr>
<tr>
<td>431 Request Header Fields Too Large</td>
<td>服务器不愿意处理请求，因为其头字段太大。在减小请求头字段的大小后，可以重新提交请求。</td>
</tr>
<tr>
<td>451 Unavailable For Legal Reasons</td>
<td>用户代理请求了无法合法提供的资源，例如政府审查的网页。</td>
</tr>
</tbody>
</table>
<h3 id="服务端错误响应">服务端错误响应</h3>
<table>
<thead>
<tr>
<th>状态码</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>500 Internal Server Error</td>
<td>服务器遇到了不知道如何处理的情况。</td>
</tr>
<tr>
<td>501 Not Implemented</td>
<td>服务器不支持请求方法，因此无法处理。服务器需要支持的唯二方法（因此不能返回此代码）是 GET and HEAD.</td>
</tr>
<tr>
<td>502 Bad Gateway</td>
<td>此错误响应表明服务器作为网关需要得到一个处理这个请求的响应，但是得到一个错误的响应。</td>
</tr>
<tr>
<td>503 Service Unavailable</td>
<td>服务器没有准备好处理请求。常见原因是服务器因维护或重载而停机。请注意，与此响应一起，应发送解释问题的用户友好页面。这个响应应该用于临时条件和如果可能的话，HTTP 标头 Retry-After 字段应该包含恢复服务之前的估计时间。网站管理员还必须注意与此响应一起发送的与缓存相关的标头，因为这些临时条件响应通常不应被缓存。</td>
</tr>
<tr>
<td>504 Gateway Timeout</td>
<td>当服务器充当网关且无法及时获得响应时，会给出此错误响应。</td>
</tr>
<tr>
<td>505 HTTP Version Not Supported</td>
<td>服务器不支持请求中使用的 HTTP 版本。</td>
</tr>
<tr>
<td>506 Variant Also Negotiates</td>
<td>服务器存在内部配置错误：所选的变体资源被配置为参与透明内容协商本身，因此不是协商过程中的适当终点。</td>
</tr>
<tr>
<td>507 Insufficient Storage (WebDAV)</td>
<td>无法在资源上执行该方法，因为服务器无法存储成功完成请求所需的表示。</td>
</tr>
<tr>
<td>508 Loop Detected (WebDAV)</td>
<td>服务器在处理请求时检测到无限循环。</td>
</tr>
<tr>
<td>510 Not Extended</td>
<td>服务器需要对请求进行进一步扩展才能完成请求。</td>
</tr>
<tr>
<td>511 Network Authentication Required</td>
<td>指示客户端需要进行身份验证才能获得网络访问权限。</td>
</tr>
</tbody>
</table>
<h3 id="Body">Body</h3>
<p>请求/响应的最后一部分是它的 body</p>
<ul>
<li>不是所有的请求都有一个 body：例如获取资源的请求，GET，HEAD，DELETE 和 OPTIONS，通常它们不需要 body。有些请求将数据发送到服务器以便更新数据：常见的的情况是 POST 请求（包含 HTML 表单数据）。</li>
<li>不是所有的响应都有 body：具有状态码（如 201 或 204） 的响应，通常不会
有 body。</li>
</ul>
<p>任何信息</p>
<p>需要 Content-Length、Content-Type</p>
<h3 id="HTTP-1-x-报文缺点">HTTP/1.x 报文缺点</h3>
<p>HTTP/1.x 报文有一些性能上的缺点：</p>
<ul>
<li>Header 不像 body，它不会被压缩。</li>
<li>两个报文之间的 header 通常非常相似，但它们仍然在连接中重复传输。</li>
<li>无法复用。当在同一个服务器打开几个连接时：TCP 热连接比冷连接更加有效。</li>
</ul>
<h3 id="HTTP-2-为了更优异的表现">HTTP/2 - 为了更优异的表现</h3>
<p>在 2010 年到 2015 年，谷歌通过实践了一个实验性的 SPDY 协议，证明了一个在客户端和服务器端交换数据的另类方式。其收集了浏览器和服务器端的开发者的焦点问题。明确了响应数量的增加和解决复杂的数据传输，SPDY 成为了 HTTP/2 协议的基础。</p>
<p>HTTP/2 在 HTTP/1.1 有几处基本的不同：</p>
<ul>
<li>HTTP/2 是二进制协议而不是文本协议。不再可读，也不可无障碍的手动创建，改善的优化技术现在可被实施。</li>
<li>这是一个复用协议。并行的请求能在同一个链接中处理，移除了 HTTP/1.x 中顺序和
阻塞的约束。</li>
<li>压缩了 headers。因为 headers 在一系列请求中常常是相似的，其移除了重复和传输重复数据的成本。</li>
<li>其允许服务器在客户端缓存中填充数据，通过一个叫服务器推送的机制来提前请求。</li>
</ul>
<h3 id="流、消息、帧">流、消息、帧</h3>
<p>流（Stream）：是在 HTTP/2 连接中在客户端和服务器之间交换的独立双向帧序列。流是连接中的一个虚拟信道，可以承载双向消息传输。每个流有唯一整数标识符。为了防止两端流
ID 冲突，客户端发起的流具有奇数 ID，服务器端发起的流具有偶数 ID。能携带一个至多个消息。</p>
<p>消息（Message）：一个完整的请求或者响应，比如请求、响应等，由一个或多个组成。</p>
<p>帧（Frame）：在 HTTP/2 通信的最小单元。每个桢包括一个帧头，里面有个很小标志，来区别是属于哪个流。</p>
<h3 id="流的重要特征">流的重要特征</h3>
<ol>
<li>一个 HTTP/2 连接可以包含多个同时打开的流，并且可以从多个流中交叉帧。</li>
<li>流可以单独建立和使用，也可以由客户端或服务器共享。</li>
<li>流可以由任一端点关闭。</li>
<li>帧在流上发送的顺序非常重要。 收件人按收到的顺序处理框架。 特别是，HEADERS 和 DATA 帧的顺序在语义上很重要。</li>
<li>流用无符号的 31 位整数标识。 流标识符由启动流的端点分配给流。客户端发起的流必须使用奇数流标识符;那些由服务器发起的必须使用偶数流标识符。</li>
</ol>
<h3 id="二进制格式">二进制格式</h3>
<ul>
<li>Start Line</li>
<li>Header</li>
<li>Body</li>
<li>Length（24）</li>
<li>Type（8）</li>
<li>Flags（8）</li>
<li>R Stream ID（31）</li>
<li>Payload（）</li>
</ul>
<h2 id="二进制帧层">二进制帧层</h2>
<p><img src="/59356/image-20230130124054502.png" alt></p>
<p><img src="/59356/image-20230130124102464.png" alt></p>
<h2 id="请求和响应多路复用">请求和响应多路复用</h2>
<p><img src="/59356/image-20230130124113165.png" alt></p>
<p><img src="/59356/image-20230130124117576.png" alt></p>
<h3 id="流量控制">流量控制</h3>
<p>流量控制特定于连接。两种类型的流量控制都位于单跳的端点之间，而不是整个端到端
路径。</p>
<p>流量控制基于 WINDOW_UPDATE 帧。接收者宣告他们准备在一个流上以及整个连接上
接收多少个字节。</p>
<p>流量控制是由接收器提供的全面控制方向。接收者可以选择为每个流和整个连接设置它想要的任何窗口大小。发送方必须遵守接收方施加的流量控制限制。客户端，服务器和中介都独立地将其流量控制窗口作为接收者进行通告，并遵守发送时由对等方设置的流量控制限制。</p>
<p>对于新流和整个连接，流量控制窗口的初始值为 65,535 个八比特组。</p>
<p>帧类型决定流量控制是否适用于帧。在本文档中指定的帧中，只有数据帧受流量控制；所有其他帧类型不会占用通告的流量控制窗口中的空间。这确保了重要的控制框架不会被流量控制阻塞。</p>
<p>流量控制不能禁用。</p>
<p>HTTP/2 仅定义 WINDOW_UPDATE 帧的格式和语义。</p>
<h3 id="优先级和依赖性">优先级和依赖性</h3>
<p>每个流都包含一个优先级（也就是“权重”），它被用来告诉对端哪个流更重要。当资源有限的时候，服务器会根据优先级来选择应该先发送哪些流。</p>
<p>客户端可以通过在打开流的 HEADERS 帧中包含优先级信息来为新流分配优先级。在其他任何时候，PRIORITY 帧都可以用来改变流的优先级。</p>
<p>每个流可以被赋予对另一个流的显式依赖。包括依赖关系表示优先将资源分配给识别的流而不是依赖流。借助于 PRIORITY 帧，客户端同样可以告知服务器当前的流依赖于其他哪个流。该功能让客户端能建立一个优先级“树”，所有“子流”会依赖于“父流”的传输完成情况。
优先级和依赖关系可以在传输过程中被动态的改变。这样当用户滚动一个全是图片的页面的时候，浏览器就能够指定哪个图片拥有更高的优先级。或者是在你切换标签页的时候，浏览器可以提升新切换到页面所包含流的优先级。</p>
<h3 id="服务器推送">服务器推送</h3>
<p>这个功能通常被称作“缓存推送”。主要的思想是：当一个客户端请求资源 X，而服务器知道它很可能也需要资源 Z 的情况下，服务器可以在客户端发送请求前，主动将资源 Z 推送给客户端。这个功能帮助客户端将 Z 放进缓存以备将来之需。</p>
<p>服务器推送需要客户端显式的允许服务器提供该功能。但即使如此，客户端依然能自主选择是否需要中断该推送的流。如果不需要的话，客户端可以通过发送一个 RST_STREAM 帧来中止。</p>
<p><img src="/59356/image-20230130124235127.png" alt></p>
<h3 id="头压缩">头压缩</h3>
<p>http1.x 的头带有大量信息，而且每次都要重复发送。http/2 使用 encoder 来减少需要传输的 header 大小，通讯双方各自缓存一份头部字段表，既避免了重复 header 的传输，又减小了需要传输的大小。</p>
<p>对于相同的数据，不再通过每次请求和响应发送，通信期间几乎不会改变通用键-值对（用户代理、可接受的媒体类型，等等）只需发送一次。</p>
<p>事实上,如果请求中不包含首部（例如对同一资源的轮询请求），那么，首部开销就是零字节，此时所有首部都自动使用之前请求发送的首部。</p>
<p>如果首部发生了变化，则只需将变化的部分加入到 header 帧中，改变的部分会加入到头部字段表中，首部表在 http 2.0 的连接存续期内始终存在，由客户端和服务器共同渐进地更新。</p>
<p>需要注意的是，http 2.0 关注的是首部压缩，而我们常用的 gzip 等是报文内容（body）的压缩，二者不仅不冲突，且能够一起达到更好的压缩效果。</p>
<p>http/2 使用的是专门为首部压缩而设计的 HPACK 算法。</p>
<h2 id="头压缩实例">头压缩实例</h2>
<p><img src="/59356/image-20230130124315947.png" alt></p>
<h3 id="协商示例">协商示例</h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html">GET /page HTTP/1.1 Host: server.example.com Connection: Upgrade, HTTP2-Settings<br>Upgrade: HTTP/2.0 HTTP2-Settings: (SETTINGS payload) HTTP/1.1 200 OK<br>Content-length: 243 Content-type: text/html (... HTTP 1.1 response ...) (or)<br>HTTP/1.1 101 Switching Protocols Connection: Upgrade Upgrade: HTTP/2.0 (... HTTP<br>2.0 response ...)<br></code></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> http2 = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;http2&quot;</span>);<br><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;fs&quot;</span>);<br><span class="hljs-keyword">const</span> server = http2.<span class="hljs-title function_">createSecureServer</span>(&#123;<br>	<span class="hljs-attr">key</span>: fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&quot;localhost-privkey.pem&quot;</span>),<br>	<span class="hljs-attr">cert</span>: fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&quot;localhost-cert.pem&quot;</span>),<br>&#125;);<br>server.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;error&quot;</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err));<br>server.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;stream&quot;</span>, <span class="hljs-function">(<span class="hljs-params">stream, headers</span>) =&gt;</span> &#123;<br>	<span class="hljs-comment">// stream is a Duplex</span><br>	stream.<span class="hljs-title function_">respond</span>(&#123;<br>		<span class="hljs-string">&quot;content-type&quot;</span>: <span class="hljs-string">&quot;text/html&quot;</span>,<br>		<span class="hljs-string">&quot;:status&quot;</span>: <span class="hljs-number">200</span>,<br>	&#125;);<br>	stream.<span class="hljs-title function_">end</span>(<span class="hljs-string">&quot;&lt;h1&gt;Hello World&lt;/h1&gt;&quot;</span>);<br>&#125;);<br>server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">8443</span>);<br></code></pre></td></tr></table></figure>
<h3 id="为何需要-HTTP-3">为何需要 HTTP/3</h3>
<ul>
<li>TCP 队头阻塞问题</li>
<li>TCP 握手时长</li>
<li>移动场景的网络切换成本：IP 地址会发生变化，而 TCP 协议是根据四元组来确定一个连接的，需要重新建立连接</li>
</ul>
<p><img src="/59356/image-20230130124419593.png" alt></p>
<h3 id="HTTP-3">HTTP/3</h3>
<p>HTTP/3 基于 UDP 协议重新定义了连接，在 QUIC 层实现了无序、并发字节流的传输，解决了队头阻塞问题（包括基于 QPACK 解决了动态表的队头阻塞）；</p>
<p>HTTP/3 重新定义了 TLS 协议加密 QUIC 头部的方式，既提高了网络攻击成本又降低了建立连接的速度（仅需 1 个 RTT 就可以同时完成建链与密钥协商）；</p>
<p>HTTP/3 将 Packet、QUIC Frame、HTTP3 Frame 分离，实现了连接迁移功能，降低了 5G 环境下高速移动设备的连接维护成本。</p>
<p><img src="/59356/image-20230130124435169.png" alt></p>

    </div>

    
    
    
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechat-award.jpg" alt="EagleBear2002 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.jpg" alt="EagleBear2002 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>


      <footer class="post-footer">

        
  <div class="post-widgets">
    <div class="wp_rating">
      <div id="wpac-rating"></div>
    </div>
  </div>


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/51474/" rel="prev" title="Web 前端开发-10-express">
      <i class="fa fa-chevron-left"></i> Web 前端开发-10-express
    </a></div>
      <div class="post-nav-item">
    <a href="/1539/" rel="next" title="Web 前端开发-11-Ajax-s">
      Web 前端开发-11-Ajax-s <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Web-%E4%B8%8E-HTTP"><span class="nav-number">1.</span> <span class="nav-text">Web 与 HTTP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-%E6%80%BB%E8%A7%88"><span class="nav-number">2.</span> <span class="nav-text">HTTP 总览</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RFC-%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="nav-number">3.</span> <span class="nav-text">RFC 的定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-%E5%8E%86%E5%8F%B2"><span class="nav-number">4.</span> <span class="nav-text">HTTP 历史</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-%E5%8D%8F%E8%AE%AE%E7%9A%84%E6%BC%94%E8%BF%9B"><span class="nav-number">4.1.</span> <span class="nav-text">HTTP 协议的演进</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-2"><span class="nav-number">4.2.</span> <span class="nav-text">HTTP&#x2F;2</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82-%E5%93%8D%E5%BA%94"><span class="nav-number">5.</span> <span class="nav-text">请求-响应</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%92%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E4%BD%BF%E7%94%A8-TCP-%E5%A5%97%E6%8E%A5%E5%AD%97%E6%8E%A5%E5%8F%A3%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1"><span class="nav-number">5.1.</span> <span class="nav-text">HTTP 客户端和服务器端使用 TCP 套接字接口进行通信</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-%E4%BA%8B%E5%8A%A1%E5%BB%B6%E8%BF%9F"><span class="nav-number">5.2.</span> <span class="nav-text">HTTP 事务延迟</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BD%B1%E5%93%8D-HTTP-%E7%9A%84%E5%B8%B8%E8%A7%81%E7%9A%84%E4%B8%8E-tcp-%E7%9B%B8%E5%85%B3%E7%9A%84%E5%BB%B6%E8%BF%9F"><span class="nav-number">5.3.</span> <span class="nav-text">影响 HTTP 的常见的与 tcp 相关的延迟</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-1-x-%E7%9A%84%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="nav-number">6.</span> <span class="nav-text">HTTP&#x2F;1.x 的连接管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%AD%E8%BF%9E%E6%8E%A5"><span class="nav-number">6.1.</span> <span class="nav-text">短连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%95%BF%E8%BF%9E%E6%8E%A5-%E6%8C%81%E4%B9%85%E8%BF%9E%E6%8E%A5"><span class="nav-number">6.2.</span> <span class="nav-text">长连接&#x2F;持久连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-%E6%B5%81%E6%B0%B4%E7%BA%BF"><span class="nav-number">6.3.</span> <span class="nav-text">HTTP 流水线</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%9F%E5%90%8D%E5%88%86%E7%89%87"><span class="nav-number">7.</span> <span class="nav-text">域名分片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-%E4%BA%8B%E5%8A%A1"><span class="nav-number">8.</span> <span class="nav-text">HTTP 事务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-%E6%B6%88%E6%81%AF"><span class="nav-number">9.</span> <span class="nav-text">HTTP 消息</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B6%88%E6%81%AF%E7%BB%84%E6%88%90"><span class="nav-number">9.1.</span> <span class="nav-text">消息组成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-%E8%AF%B7%E6%B1%82%E6%B6%88%E6%81%AF"><span class="nav-number">9.2.</span> <span class="nav-text">HTTP 请求消息</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95"><span class="nav-number">9.2.1.</span> <span class="nav-text">请求方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#GET-%E6%96%B9%E6%B3%95%E7%A4%BA%E4%BE%8B"><span class="nav-number">9.2.1.1.</span> <span class="nav-text">GET 方法示例</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#POST-%E6%96%B9%E6%B3%95%E7%A4%BA%E4%BE%8B"><span class="nav-number">9.2.1.2.</span> <span class="nav-text">POST 方法示例</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#TRACE-%E7%A4%BA%E4%BE%8B"><span class="nav-number">9.2.1.3.</span> <span class="nav-text">TRACE 示例</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%B4%E5%9F%9F"><span class="nav-number">9.2.2.</span> <span class="nav-text">头域</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B"><span class="nav-number">9.2.3.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-%E5%93%8D%E5%BA%94%E6%B6%88%E6%81%AF"><span class="nav-number">9.3.</span> <span class="nav-text">HTTP 响应消息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E8%A1%8C"><span class="nav-number">9.4.</span> <span class="nav-text">响应状态行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8A%B6%E6%80%81%E7%A0%81"><span class="nav-number">9.5.</span> <span class="nav-text">状态码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E7%8A%B6%E6%80%81%E7%A0%81"><span class="nav-number">9.6.</span> <span class="nav-text">常用状态码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E5%93%8D%E5%BA%94"><span class="nav-number">9.7.</span> <span class="nav-text">信息响应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%88%90%E5%8A%9F%E5%93%8D%E5%BA%94"><span class="nav-number">9.8.</span> <span class="nav-text">成功响应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E6%B6%88%E6%81%AF"><span class="nav-number">9.9.</span> <span class="nav-text">重定向消息</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#301-%E6%B0%B8%E4%B9%85%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">9.9.1.</span> <span class="nav-text">301-永久重定向</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%B4%E6%97%B6%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">9.9.2.</span> <span class="nav-text">临时重定向</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">9.9.3.</span> <span class="nav-text">特殊重定向</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%94%99%E8%AF%AF%E5%93%8D%E5%BA%94"><span class="nav-number">9.10.</span> <span class="nav-text">客户端错误响应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E9%94%99%E8%AF%AF%E5%93%8D%E5%BA%94"><span class="nav-number">9.11.</span> <span class="nav-text">服务端错误响应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Body"><span class="nav-number">9.12.</span> <span class="nav-text">Body</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-1-x-%E6%8A%A5%E6%96%87%E7%BC%BA%E7%82%B9"><span class="nav-number">9.13.</span> <span class="nav-text">HTTP&#x2F;1.x 报文缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-2-%E4%B8%BA%E4%BA%86%E6%9B%B4%E4%BC%98%E5%BC%82%E7%9A%84%E8%A1%A8%E7%8E%B0"><span class="nav-number">9.14.</span> <span class="nav-text">HTTP&#x2F;2 - 为了更优异的表现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E3%80%81%E6%B6%88%E6%81%AF%E3%80%81%E5%B8%A7"><span class="nav-number">9.15.</span> <span class="nav-text">流、消息、帧</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E7%9A%84%E9%87%8D%E8%A6%81%E7%89%B9%E5%BE%81"><span class="nav-number">9.16.</span> <span class="nav-text">流的重要特征</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%A0%BC%E5%BC%8F"><span class="nav-number">9.17.</span> <span class="nav-text">二进制格式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%B8%A7%E5%B1%82"><span class="nav-number">10.</span> <span class="nav-text">二进制帧层</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8"><span class="nav-number">11.</span> <span class="nav-text">请求和响应多路复用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="nav-number">11.1.</span> <span class="nav-text">流量控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%98%E5%85%88%E7%BA%A7%E5%92%8C%E4%BE%9D%E8%B5%96%E6%80%A7"><span class="nav-number">11.2.</span> <span class="nav-text">优先级和依赖性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A8%E9%80%81"><span class="nav-number">11.3.</span> <span class="nav-text">服务器推送</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%B4%E5%8E%8B%E7%BC%A9"><span class="nav-number">11.4.</span> <span class="nav-text">头压缩</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%B4%E5%8E%8B%E7%BC%A9%E5%AE%9E%E4%BE%8B"><span class="nav-number">12.</span> <span class="nav-text">头压缩实例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%8F%E5%95%86%E7%A4%BA%E4%BE%8B"><span class="nav-number">12.1.</span> <span class="nav-text">协商示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BD%95%E9%9C%80%E8%A6%81-HTTP-3"><span class="nav-number">12.2.</span> <span class="nav-text">为何需要 HTTP&#x2F;3</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-3"><span class="nav-number">12.3.</span> <span class="nav-text">HTTP&#x2F;3</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="EagleBear2002"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">EagleBear2002</p>
  <div class="site-description" itemprop="description">暮雪朝霜，毋改英雄意气</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">483</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">61</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/EagleBear2002" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;EagleBear2002" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:eaglebear2002@foxmail.com" title="E-Mail → mailto:eaglebear2002@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://czxingchen.github.io/" title="https:&#x2F;&#x2F;czxingchen.github.io&#x2F;" rel="noopener" target="_blank">PL 顶会研究者-XiaoZhi</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.cnblogs.com/the-sword-of-king/" title="https:&#x2F;&#x2F;www.cnblogs.com&#x2F;the-sword-of-king&#x2F;" rel="noopener" target="_blank">模式识别专家-崖山剑</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://en.ydjsir.com.cn/" title="https:&#x2F;&#x2F;en.ydjsir.com.cn&#x2F;" rel="noopener" target="_blank">愿逐月华流照君-YDJSIR</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.csdn.net/m0_51691879?spm=1000.2115.3001.5343" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;m0_51691879?spm&#x3D;1000.2115.3001.5343" rel="noopener" target="_blank">软院科协掌门人-wbl_z</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://itxia.club/" title="https:&#x2F;&#x2F;itxia.club&#x2F;" rel="noopener" target="_blank">侠之大者为国为民-IT 侠</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://chestnutsilver.github.io/TJIS-My-Helloworld/" title="https:&#x2F;&#x2F;chestnutsilver.github.io&#x2F;TJIS-My-Helloworld&#x2F;" rel="noopener" target="_blank">因果推断爱好者-ChestnutSilver</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://atritium.github.io/" title="https:&#x2F;&#x2F;atritium.github.io&#x2F;" rel="noopener" target="_blank">任天堂技术扛把子-manqi</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.sakiyary.cn/" title="https:&#x2F;&#x2F;blog.sakiyary.cn&#x2F;" rel="noopener" target="_blank">教育部教学创新项目负责人-哈气鸭梨</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://huoxj.github.io/" title="https:&#x2F;&#x2F;huoxj.github.io&#x2F;" rel="noopener" target="_blank">离百年博客还有 98 年捞程序 Runz</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.erinwithbmq.xin/" title="https:&#x2F;&#x2F;www.erinwithbmq.xin&#x2F;" rel="noopener" target="_blank">摸鱼小能手 ErinwithBMQ の 尋夢之旅</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://tilnel.github.io/" title="https:&#x2F;&#x2F;tilnel.github.io&#x2F;" rel="noopener" target="_blank">南大耐摔王 Tilnel 的杂谈小屋</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.azifan.club/" title="https:&#x2F;&#x2F;blog.azifan.club&#x2F;" rel="noopener" target="_blank">水龙之魂</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://mzy0624.github.io/" title="https:&#x2F;&#x2F;mzy0624.github.io&#x2F;" rel="noopener" target="_blank">Haibara AI</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2022 – 
  <span itemprop="copyrightYear">2026</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">EagleBear2002</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">2.7m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">40:25</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  



  <script>
  if (CONFIG.page.isPost) {
    wpac_init = window.wpac_init || [];
    wpac_init.push({
      widget: 'Rating',
      id    : ,
      el    : 'wpac-rating',
      color : 'fc6423'
    });
    (function() {
      if ('WIDGETPACK_LOADED' in window) return;
      WIDGETPACK_LOADED = true;
      var mc = document.createElement('script');
      mc.type = 'text/javascript';
      mc.async = true;
      mc.src = '//embed.widgetpack.com/widget.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
    })();
  }
  </script>










<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
